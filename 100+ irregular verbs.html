<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Irregular Verbs - Learning Adventure</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap"
        rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap');

        :root {
            --primary-color: #ff6b6b;
            --secondary-color: #4ecdc4;
            --accent-color: #ffe66d;
            --text-dark: #2c3e50;
            --text-light: #34495e;
            --text-muted: #7f8c8d;
            --background-main: #f8f6f0;
            --background-light: #faf8f3;
            --background-white: #fff;
            --border-light: #e8e4d9;
            --border-medium: #bdc3c7;
            --success-color: #27ae60;
            --success-light: #d5f4e6;
            --error-color: #e74c3c;
            --error-light: #ffeaea;
            --warning-color: #f39c12;
            --warning-light: #fff9e6;
            --info-color: #3498db;
            --info-light: #e8f4fd;
            --purple-color: #9b59b6;
            --font-family: 'Comic Neue', cursive;
            --border-radius-small: 8px;
            --border-radius-medium: 15px;
            --border-radius-large: 20px;
            --border-radius-xl: 25px;
            --shadow-light: 0 5px 15px rgba(0, 0, 0, 0.1);
            --shadow-medium: 0 8px 20px rgba(0, 0, 0, 0.1);
            --shadow-heavy: 0 15px 35px rgba(0, 0, 0, 0.3);
            --transition-fast: 0.2s ease;
            --transition-medium: 0.3s ease;
            --transition-slow: 0.5s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background: var(--background-main);
            color: var(--text-dark);
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow-x: hidden !important;
            max-width: 1440px;
        }

        .presentation {
            background: var(--background-light);
            width: 100vw;
            height: 100vh;
            overflow-x: hidden !important;
            border: none;
            border-radius: 0;
            box-shadow: none;
            display: flex;
            flex-direction: column;
        }

        .slide {
            display: none;
            padding: 40px;
            flex: 1;
            overflow-y: auto;
            animation: slideIn var(--transition-slow);
            position: relative;
            overflow-x: hidden !important;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 40px;
            background: var(--background-main);
            border-top: 3px solid var(--border-light);
            flex-shrink: 0;
            position: relative;
            z-index: 1000;
        }

        .nav-btn {
            background: var(--primary-color);
            color: var(--background-white);
            border: none;
            padding: 15px 30px;
            border-radius: var(--border-radius-xl);
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 700;
            font-family: var(--font-family);
            transition: all var(--transition-medium);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
        }

        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.4);
        }

        .nav-btn:disabled {
            background: var(--border-medium);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .slide-counter {
            color: var(--text-dark);
            font-weight: 700;
            font-size: 1.2em;
            background: var(--background-white);
            padding: 10px 20px;
            border-radius: var(--border-radius-large);
            border: 2px solid var(--border-light);
        }

        .slide::before {
            content: '';
            position: absolute;
            top: -20px;
            left: -20px;
            width: 80px;
            height: 80px;
            background: var(--primary-color);
            border-radius: 50%;
            opacity: 0.1;
            z-index: 0;
        }

        .slide::after {
            content: '';
            position: absolute;
            bottom: -30px;
            right: -30px;
            width: 100px;
            height: 60px;
            background: var(--secondary-color);
            transform: rotate(45deg);
            opacity: 0.1;
            z-index: 0;
        }

        .decorative-star {
            position: absolute;
            font-size: 2em;
            opacity: 0.3;
            z-index: 0;
        }

        .star-1 {
            top: 10%;
            right: 15%;
            color: var(--primary-color);
        }

        .star-2 {
            bottom: 20%;
            left: 10%;
            color: var(--secondary-color);
        }

        .star-3 {
            top: 50%;
            right: 5%;
            color: var(--accent-color);
        }

        .decorative-shape {
            position: absolute;
            z-index: 0;
            opacity: 0.2;
        }

        .shape-triangle {
            width: 0;
            height: 0;
            border-left: 25px solid transparent;
            border-right: 25px solid transparent;
            border-bottom: 40px solid var(--primary-color);
            top: 15%;
            left: 5%;
        }

        .shape-circle {
            width: 60px;
            height: 60px;
            background: var(--secondary-color);
            border-radius: 50%;
            bottom: 25%;
            right: 8%;
        }

        .shape-square {
            width: 40px;
            height: 40px;
            background: var(--accent-color);
            transform: rotate(45deg);
            top: 30%;
            left: 85%;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes bounce {

            0%,
            20%,
            60%,
            100% {
                transform: translateY(0);
            }

            40% {
                transform: translateY(-10px);
            }

            80% {
                transform: translateY(-5px);
            }
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            10%,
            30%,
            50%,
            70%,
            90% {
                transform: translateX(-5px);
            }

            20%,
            40%,
            60%,
            80% {
                transform: translateX(5px);
            }
        }

        @keyframes flip {
            0% {
                transform: rotateY(0);
            }

            50% {
                transform: rotateY(90deg);
            }

            100% {
                transform: rotateY(0);
            }
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        h1 {
            color: var(--text-dark);
            font-size: 2.8em;
            margin-bottom: 30px;
            text-align: center;
            font-weight: 700;
            position: relative;
            z-index: 10;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        h2 {
            color: var(--text-light);
            font-size: 2.2em;
            margin-bottom: 25px;
            text-align: center;
            position: relative;
            z-index: 10;
        }

        h3 {
            color: var(--text-dark);
            font-size: 1.6em;
            margin-bottom: 20px;
            margin-top: 25px;
            position: relative;
            z-index: 10;
        }

        .title-decoration {
            position: relative;
            z-index: 10;
        }

        .title-decoration::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--accent-color));
            border-radius: 2px;
        }

        .highlight {
            background: linear-gradient(120deg, var(--accent-color) 0%, var(--primary-color) 100%);
            padding: 3px 8px;
            border-radius: var(--border-radius-small);
            font-weight: 700;
            color: var(--text-dark);
        }

        .verb-categories-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
            position: relative;
            z-index: 10;
        }

        .verb-category-card {
            background: var(--background-white);
            border: 3px solid var(--border-light);
            padding: 25px;
            border-radius: var(--border-radius-large);
            text-align: center;
            transform: translateY(0);
            transition: all var(--transition-medium);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-medium);
        }

        .common-verbs-card {
            border-color: var(--success-color);
        }

        .common-verbs-card::before {
            content: '';
            position: absolute;
            top: -10px;
            right: -10px;
            width: 30px;
            height: 30px;
            background: var(--success-color);
            border-radius: 50%;
            opacity: 0.3;
        }

        .action-verbs-card {
            border-color: var(--accent-color);
        }

        .action-verbs-card::before {
            content: '';
            position: absolute;
            top: -10px;
            right: -10px;
            width: 30px;
            height: 30px;
            background: var(--accent-color);
            border-radius: 50%;
            opacity: 0.3;
        }

        .tricky-verbs-card {
            border-color: var(--error-color);
        }

        .tricky-verbs-card::before {
            content: '';
            position: absolute;
            top: -10px;
            right: -10px;
            width: 30px;
            height: 30px;
            background: var(--error-color);
            border-radius: 50%;
            opacity: 0.3;
        }

        .verb-category-card:hover {
            transform: translateY(-8px) rotate(1deg);
            box-shadow: var(--shadow-heavy);
        }

        .verb-category-card h4 {
            font-size: 1.8em;
            margin-bottom: 15px;
            color: var(--text-dark);
            font-weight: 700;
        }

        .verb-category-card p {
            font-size: 1.1em;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        /* Flashcard Styles */
        .flashcards-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 25px 0;
            position: relative;
            z-index: 10;
        }

        .flashcard {
            background: var(--background-white);
            border: 3px solid var(--border-light);
            border-radius: var(--border-radius-large);
            height: 150px;
            cursor: pointer;
            perspective: 1000px;
            transition: all var(--transition-medium);
            position: relative;
            box-shadow: var(--shadow-light);
        }

        .flashcard:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-medium);
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front,
        .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            border-radius: var(--border-radius-large);
        }

        .flashcard-front {
            background: var(--background-white);
            border: 3px solid var(--secondary-color);
        }

        .flashcard-back {
            background: var(--info-light);
            border: 3px solid var(--info-color);
            transform: rotateY(180deg);
        }

        .verb-infinitive {
            font-size: 1.4em;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .verb-translation {
            font-size: 1em;
            color: var(--primary-color);
            font-weight: 600;
        }

        .verb-forms {
            font-size: 1.1em;
            color: var(--text-dark);
            line-height: 1.4;
            text-align: center;
        }

        .past-form {
            color: var(--error-color);
            font-weight: 700;
            margin-bottom: 5px;
        }

        .past-participle {
            color: var(--success-color);
            font-weight: 700;
        }

        .exercise-container {
            margin: 20px 0;
            position: relative;
            z-index: 10;
        }

        .score-board {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--background-main);
            padding: 15px 25px;
            border-radius: var(--border-radius-medium);
            border: 2px solid var(--border-light);
            margin-bottom: 25px;
            font-size: 1.2em;
            font-weight: 600;
        }

        .reset-btn {
            background: var(--accent-color);
            color: var(--text-dark);
            border: none;
            padding: 8px 16px;
            border-radius: var(--border-radius-medium);
            cursor: pointer;
            font-weight: 600;
            font-family: var(--font-family);
            transition: all var(--transition-medium);
            font-size: 0.9em;
            min-width: 80px;
        }

        .reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(255, 230, 109, 0.4);
        }

        .choice-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .choice-btn {
            padding: 15px 25px;
            border: none;
            border-radius: var(--border-radius-large);
            font-size: 1.1em;
            font-weight: 700;
            font-family: var(--font-family);
            cursor: pointer;
            transition: all var(--transition-medium);
            background: var(--secondary-color);
            color: white;
        }

        .choice-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        .feedback {
            text-align: center;
            font-size: 1.3em;
            font-weight: 700;
            margin: 20px 0;
            padding: 15px;
            border-radius: var(--border-radius-medium);
            min-height: 50px;
        }

        .feedback.correct {
            background: var(--success-light);
            color: var(--success-color);
            border: 2px solid var(--success-color);
        }

        .feedback.incorrect {
            background: var(--error-light);
            color: var(--error-color);
            border: 2px solid var(--error-color);
        }

        .current-verb-display {
            text-align: center;
            margin: 30px 0;
        }

        .current-verb {
            font-size: 2.5em;
            font-weight: 700;
            color: var(--text-dark);
            background: var(--background-white);
            border: 3px solid var(--secondary-color);
            border-radius: var(--border-radius-large);
            padding: 20px;
            margin-bottom: 15px;
            display: inline-block;
            min-width: 200px;
            line-height: 1.2;
        }

        .verb-meaning {
            font-size: 1.3em;
            color: var(--text-muted);
            font-weight: 600;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 25px 0;
        }

        .option-card {
            background: var(--background-white);
            border: 3px solid var(--border-light);
            padding: 25px;
            border-radius: var(--border-radius-large);
            text-align: center;
            cursor: pointer;
            font-size: 1.4em;
            font-weight: 700;
            transition: all var(--transition-medium);
        }

        .option-card:hover {
            transform: translateY(-5px);
            border-color: var(--secondary-color);
            box-shadow: var(--shadow-medium);
        }

        .option-card.correct {
            border-color: var(--success-color);
            background: var(--success-light);
            animation: bounce 0.6s ease;
        }

        .option-card.incorrect {
            border-color: var(--error-color);
            background: var(--error-light);
            animation: shake 0.6s ease;
        }

        .question-navigation {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .nav-question-btn {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: var(--border-radius-large);
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 700;
            font-family: var(--font-family);
            transition: all var(--transition-medium);
            min-width: 120px;
        }

        .nav-question-btn:hover {
            background: #3bb5b0;
            transform: translateY(-2px);
        }

        .nav-question-btn:disabled {
            background: var(--border-medium);
            cursor: not-allowed;
            transform: none;
        }

        /* Drag & Drop Styles */
        .drag-drop-container {
            background: var(--background-white);
            border: 3px solid var(--secondary-color);
            border-radius: var(--border-radius-large);
            padding: 25px;
            margin: 20px 0;
            position: relative;
            z-index: 10;
            box-shadow: var(--shadow-medium);
        }

        .draggable-verbs-container {
            background: var(--background-main);
            border: 2px dashed var(--border-medium);
            border-radius: var(--border-radius-medium);
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
            min-height: 80px;
        }

        .draggable-verb {
            background: var(--accent-color);
            color: var(--text-dark);
            padding: 10px 15px;
            border-radius: var(--border-radius-medium);
            margin: 5px;
            cursor: grab;
            font-weight: 700;
            display: inline-block;
            transition: all var(--transition-medium);
            user-select: none;
            border: 2px solid transparent;
        }

        .draggable-verb:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-light);
            border-color: var(--warning-color);
        }

        .draggable-verb.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }

        .drop-zones {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin: 20px 0;
        }

        .drop-zone {
            background: var(--background-main);
            border: 2px dashed var(--border-medium);
            border-radius: var(--border-radius-medium);
            padding: 30px 20px;
            text-align: center;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: all var(--transition-medium);
        }

        .drop-zone.drag-over {
            border-color: var(--secondary-color);
            background: var(--info-light);
            transform: scale(1.02);
        }

        .drop-zone.correct {
            background: var(--success-light);
            border-color: var(--success-color);
        }

        .drop-zone.incorrect {
            background: var(--error-light);
            border-color: var(--error-color);
        }

        /* Memory Game Styles */
        .match-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 20px 0;
        }

        .match-column {
            background: var(--background-white);
            border: 3px solid var(--border-light);
            border-radius: var(--border-radius-large);
            padding: 20px;
            position: relative;
            z-index: 10;
        }

        .match-item {
            background: var(--background-main);
            border: 2px solid var(--border-light);
            padding: 15px;
            margin: 10px 0;
            border-radius: var(--border-radius-medium);
            cursor: pointer;
            transition: all var(--transition-medium);
            font-weight: 600;
            text-align: center;
        }

        .match-item:hover {
            background: var(--secondary-color);
            color: white;
            transform: translateX(5px);
        }

        .match-item.selected {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .match-item.matched {
            background: var(--success-light);
            border-color: var(--success-color);
            color: var(--success-color);
            cursor: default;
        }

        .match-item.incorrect {
            background: var(--error-light);
            border-color: var(--error-color);
            animation: shake 0.5s ease;
        }

        .progress-container {
            background: var(--background-white);
            border: 3px solid var(--info-color);
            border-radius: var(--border-radius-large);
            padding: 20px;
            margin: 20px 0;
            position: relative;
            z-index: 10;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: var(--border-light);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success-color), var(--secondary-color));
            width: 0%;
            transition: width var(--transition-slow);
            border-radius: 10px;
        }

        .progress-text {
            text-align: center;
            font-weight: 700;
            color: var(--text-dark);
            margin-top: 10px;
        }

        /* Story Exercise Styles */
        .story-container {
            background: var(--background-white);
            border: 3px solid var(--secondary-color);
            border-radius: var(--border-radius-large);
            padding: 30px;
            margin: 20px 0;
            box-shadow: var(--shadow-medium);
            position: relative;
            z-index: 10;
        }

        .story-title {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-light);
        }

        .story-title h4 {
            color: var(--text-dark);
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        .story-text {
            line-height: 1.8;
            font-size: 1.2em;
            color: var(--text-dark);
        }

        .story-paragraph {
            margin-bottom: 20px;
            padding: 15px;
            background: var(--background-main);
            border-radius: var(--border-radius-medium);
            border-left: 4px solid var(--secondary-color);
        }

        .story-blank {
            display: inline-block;
            min-width: 100px;
            padding: 5px 10px;
            margin: 0 3px;
            background: var(--background-white);
            border: 2px dashed var(--border-medium);
            border-radius: var(--border-radius-small);
            text-align: center;
            cursor: pointer;
            font-weight: 700;
            color: var(--text-muted);
            transition: all var(--transition-medium);
            position: relative;
        }

        .story-blank:hover {
            border-color: var(--secondary-color);
            background: var(--info-light);
            transform: translateY(-2px);
        }

        .story-blank.selected {
            background: #ffe6e6;
            border-color: var(--primary-color);
            color: var(--text-dark);
        }

        .story-blank.filled {
            background: var(--info-light);
            border: 2px solid var(--secondary-color);
            color: var(--text-dark);
        }

        .story-blank.correct {
            background: var(--success-light);
            border-color: var(--success-color);
            color: var(--success-color);
        }

        .story-blank.incorrect {
            background: var(--error-light);
            border-color: var(--error-color);
            color: var(--error-color);
            animation: shake 0.5s ease;
        }

        .story-dropdown {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--background-white);
            border: 3px solid var(--secondary-color);
            border-radius: var(--border-radius-medium);
            padding: 5px;
            box-shadow: var(--shadow-medium);
            z-index: 1000;
            display: none;
            min-width: 120px;
        }

        .story-dropdown.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .dropdown-option {
            display: block;
            width: 100%;
            padding: 8px 12px;
            background: var(--background-main);
            border: none;
            border-radius: var(--border-radius-small);
            margin: 2px 0;
            cursor: pointer;
            font-weight: 600;
            text-align: center;
            transition: all var(--transition-medium);
            font-family: var(--font-family);
        }

        .dropdown-option:hover {
            background: var(--secondary-color);
            color: white;
            transform: translateY(-1px);
        }

        .story-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid var(--border-light);
            flex-wrap: wrap;
            gap: 15px;
        }

        .story-progress {
            font-size: 1.2em;
            font-weight: 600;
            color: var(--text-dark);
        }

        .story-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .check-btn {
            background: var(--success-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: var(--border-radius-large);
            font-size: 1.1em;
            font-weight: 700;
            font-family: var(--font-family);
            cursor: pointer;
            transition: all var(--transition-medium);
        }

        .check-btn:hover {
            background: #229954;
            transform: translateY(-2px);
        }
    </style>
</head>

<body>
    <div class="presentation">
        <!-- Slide 1: Introduction -->
        <div class="slide active">
            <div class="decorative-star star-1">🎯</div>
            <div class="decorative-star star-2">✨</div>
            <div class="decorative-shape shape-triangle"></div>
            <div class="decorative-shape shape-circle"></div>

            <h1 class="title-decoration">🎯 Irregular Verbs</h1>
            <h2>Learning Adventure for Vadim!</h2>

            <p
                style="font-size: 1.3em; text-align: center; margin: 30px 0; position: relative; z-index: 10; font-weight: 600;">
                Welcome to our <strong>Irregular Verbs</strong> adventure! We'll learn 100 irregular verbs with fun
                exercises!<br>
                <span style="color: var(--text-muted); font-size: 0.9em;">Добро пожаловать в наше приключение с <strong>неправильными глаголами</strong>! Мы изучим 100 неправильных глаголов с веселыми упражнениями!</span>
            </p>

            <div class="verb-categories-grid">
                <div class="verb-category-card common-verbs-card">
                    <h4>🌟 Common Verbs</h4>
                    <p><strong>Most Used Verbs</strong><br><span
                            style="font-size: 0.9em; color: var(--text-muted);">Самые используемые глаголы</span></p>
                    <p style="color: var(--text-muted); margin-top: 10px;">be, have, go, do, say</p>
                    <p style="font-size: 1.1em; font-weight: 600; color: var(--success-color);">Everyday verbs /
                        Ежедневные глаголы</p>
                </div>

                <div class="verb-category-card action-verbs-card">
                    <h4>🏃 Action Verbs</h4>
                    <p><strong>Movement & Actions</strong><br><span
                            style="font-size: 0.9em; color: var(--text-muted);">Движение и действия</span></p>
                    <p style="color: var(--text-muted); margin-top: 10px;">run, jump, swim, fly</p>
                    <p style="font-size: 1.1em; font-weight: 600; color: var(--warning-color);">Fun action words /
                        Веселые слова действия</p>
                </div>

                <div class="verb-category-card tricky-verbs-card">
                    <h4>🧩 Tricky Verbs</h4>
                    <p><strong>Challenge Verbs</strong><br><span
                            style="font-size: 0.9em; color: var(--text-muted);">Сложные глаголы</span></p>
                    <p style="color: var(--text-muted); margin-top: 10px;">bring, think, teach</p>
                    <p style="font-size: 1.1em; font-weight: 600; color: var(--error-color);">Need more practice / Нужно
                        больше практики</p>
                </div>
            </div>

            <div
                style="background: var(--background-white); border: 3px solid var(--secondary-color); padding: 35px; border-radius: 25px; text-align: center; margin: 30px 0; position: relative; z-index: 10; box-shadow: var(--shadow-medium);">
                <h3>🎮 What we'll learn: / Что мы изучим:</h3>
                <p style="font-size: 1.3em; font-weight: 700; color: var(--secondary-color); line-height: 1.6;">
                    📚 100 Irregular Verbs / 100 неправильных глаголов<br>
                    🔄 Present → Past → Past Participle<br>
                    🎯 Interactive Exercises / Интерактивные упражнения<br>
                    🏆 Fun Games & Challenges / Веселые игры и задания
                </p>
            </div>
        </div>

        <!-- Slide 2: Common Verbs (1-29) -->
        <div class="slide">
            <div class="decorative-star star-1">🌟</div>
            <div class="decorative-star star-2">📚</div>
            <div class="decorative-shape shape-circle"></div>
            <div class="decorative-shape shape-square"></div>

            <h1 class="title-decoration">🌟 Common Verbs</h1>
            <h2>The Most Important Ones (1-29) / Самые важные (1-29)</h2>

            <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px; color: var(--text-muted);">
                Click on each card to see the verb forms! / Нажми на каждую карточку, чтобы увидеть формы глагола!
            </p>

            <div class="flashcards-grid" id="flashcardsGrid1">
                <!-- Flashcards will be populated by JavaScript -->
            </div>
        </div>

        <!-- Slide 3: Action Verbs (30-61) -->
        <div class="slide">
            <div class="decorative-star star-1">🏃</div>
            <div class="decorative-star star-2">⚡</div>
            <div class="decorative-shape shape-triangle"></div>
            <div class="decorative-shape shape-circle"></div>

            <h1 class="title-decoration">🏃 Action Verbs</h1>
            <h2>Movement & Actions (30-61) / Движение и действия (30-61)</h2>

            <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px; color: var(--text-muted);">
                Click on each card to see the verb forms! / Нажми на каждую карточку, чтобы увидеть формы глагола!
            </p>

            <div class="flashcards-grid" id="flashcardsGrid2">
                <!-- Flashcards will be populated by JavaScript -->
            </div>
        </div>

        <!-- Slide 4: More Verbs (62-93) -->
        <div class="slide">
            <div class="decorative-star star-1">📖</div>
            <div class="decorative-star star-2">🎨</div>
            <div class="decorative-shape shape-square"></div>
            <div class="decorative-shape shape-triangle"></div>

            <h1 class="title-decoration">📖 More Verbs</h1>
            <h2>Expanding Vocabulary (62-93) / Расширение словарного запаса (62-93)</h2>

            <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px; color: var(--text-muted);">
                Click on each card to see the verb forms! / Нажми на каждую карточку, чтобы увидеть формы глагола!
            </p>

            <div class="flashcards-grid" id="flashcardsGrid3">
                <!-- Flashcards will be populated by JavaScript -->
            </div>
        </div>

        <!-- Slide 5: Challenge Verbs (94-117) -->
        <div class="slide">
            <div class="decorative-star star-1">🧩</div>
            <div class="decorative-star star-2">🏆</div>
            <div class="decorative-shape shape-circle"></div>
            <div class="decorative-shape shape-square"></div>

            <h1 class="title-decoration">🧩 Challenge Verbs</h1>
            <h2>The Tricky Ones (94-117) / Сложные (94-117)</h2>

            <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px; color: var(--text-muted);">
                Click on each card to see the verb forms! / Нажми на каждую карточку, чтобы увидеть формы глагола!
            </p>

            <div class="flashcards-grid" id="flashcardsGrid4">
                <!-- Flashcards will be populated by JavaScript -->
            </div>
        </div>

        <!-- Slide 6: Exercise 1 - Past Form Quiz -->
        <div class="slide">
            <div class="decorative-star star-1">🎯</div>
            <div class="decorative-star star-2">📝</div>
            <div class="decorative-shape shape-triangle"></div>
            <div class="decorative-shape shape-circle"></div>
        
            <h1 class="title-decoration">🎯 Exercise 1</h1>
            <h2>Past Form Quiz / Викторина прошедшего времени</h2>
        
            <div
                style="background: var(--background-white); border: 3px solid var(--secondary-color); padding: 20px; border-radius: 20px; margin: 20px 0; position: relative; z-index: 10;">
                <p style="font-size: 1.2em; text-align: center; font-weight: 600;">
                    Choose the correct <strong style="color: var(--primary-color);">past form</strong> of the verb!<br>
                    <span style="color: var(--text-muted); font-size: 0.9em;">Выбери правильную <strong>форму прошедшего
                            времени</strong> глагола!</span>
                </p>
            </div>
        
            <!-- Category Selection -->
            <div style="text-align: center; margin: 20px 0;">
                <label style="font-weight: 700; margin-right: 10px; font-size: 1.1em;">Choose Category:</label>
                <select id="categorySelector1" onchange="changeCategory1()"
                    style="padding: 10px 15px; border-radius: 15px; border: 3px solid var(--secondary-color); font-family: var(--font-family); font-weight: 600; font-size: 1em; background: var(--background-white);">
                    <option value="0">🌟 The Most Important Ones</option>
                    <option value="1">🏃 Movement & Actions</option>
                    <option value="2">📖 Expanding Vocabulary</option>
                    <option value="3">🧩 The Tricky Ones</option>
                </select>
            </div>
        
            <div id="exercise1" class="exercise-container">
                <div class="score-board">
                    <span>Correct: <strong id="score1">0</strong>/<strong id="totalQuestions1">29</strong></span>
                    <span>Question <strong id="currentQ1">1</strong>/<strong id="maxQ1">29</strong></span>
                    <button onclick="resetExercise1()" class="reset-btn">🔄</button>
                </div>
        
                <div class="current-verb-display">
                    <div id="currentVerb1" class="current-verb">go</div>
                    <div id="verbMeaning1" class="verb-meaning">идти</div>
                </div>
        
                <div id="options1" class="options-grid">
                    <div class="option-card" onclick="checkAnswer1('went')">went</div>
                    <div class="option-card" onclick="checkAnswer1('goed')">goed</div>
                    <div class="option-card" onclick="checkAnswer1('gone')">gone</div>
                </div>
        
                <div class="question-navigation">
                    <button onclick="prevQuestion1()" class="nav-question-btn" id="prevQ1Btn">← Back</button>
                    <button onclick="nextQuestion1()" class="nav-question-btn" id="nextQ1Btn">Next →</button>
                </div>
        
                <div id="feedback1" class="feedback"></div>
            </div>
        </div>

        <!-- Slide 7: Exercise 2 - Past Simple Challenge -->
        <!-- Slide 7: Exercise 2 - Past Simple Challenge -->
        <div class="slide">
            <div class="decorative-star star-1">✏️</div>
            <div class="decorative-star star-2">🔍</div>
            <div class="decorative-shape shape-square"></div>
            <div class="decorative-shape shape-circle"></div>
        
            <h1 class="title-decoration">✏️ Exercise 2</h1>
            <h2>Past Simple Challenge / Задание с прошедшим временем</h2>
        
            <div
                style="background: var(--background-white); border: 3px solid var(--primary-color); padding: 20px; border-radius: 20px; margin: 20px 0; position: relative; z-index: 10;">
                <p style="font-size: 1.2em; text-align: center; font-weight: 600;">
                    Complete the sentence with the correct <strong style="color: var(--error-color);">verb form</strong>!<br>
                    <span style="color: var(--text-muted); font-size: 0.9em;">Заверши предложение правильной <strong>формой глагола</strong>!</span>
                </p>
            </div>
        
            <!-- Category Selection -->
            <div style="text-align: center; margin: 20px 0;">
                <label style="font-weight: 700; margin-right: 10px; font-size: 1.1em;">Choose Category:</label>
                <select id="categorySelector2" onchange="changeCategory2()"
                    style="padding: 10px 15px; border-radius: 15px; border: 3px solid var(--secondary-color); font-family: var(--font-family); font-weight: 600; font-size: 1em; background: var(--background-white);">
                    <option value="0">🌟 The Most Important Ones</option>
                    <option value="1">🏃 Movement & Actions</option>
                    <option value="2">📖 Expanding Vocabulary</option>
                    <option value="3">🧩 The Tricky Ones</option>
                </select>
            </div>
        
            <div id="exercise2" class="exercise-container">
                <div class="score-board">
                    <span>Correct: <strong id="score2">0</strong>/<strong id="totalQuestions2">29</strong></span>
                    <span>Question <strong id="currentQ2">1</strong>/<strong id="maxQ2">29</strong></span>
                    <button onclick="resetExercise2()" class="reset-btn">🔄</button>
                </div>
        
                <div class="current-verb-display">
                    <div id="currentSentence2" class="current-verb" style="font-size: 1.8em;">I have _____ this movie.
                    </div>
                    <div id="verbHint2" class="verb-meaning">see → seen</div>
                </div>
        
                <div id="options2" class="options-grid">
                    <div class="option-card" onclick="checkAnswer2('seen')">seen</div>
                    <div class="option-card" onclick="checkAnswer2('saw')">saw</div>
                    <div class="option-card" onclick="checkAnswer2('see')">see</div>
                </div>
        
                <div class="question-navigation">
                    <button onclick="prevQuestion2()" class="nav-question-btn" id="prevQ2Btn">← Back</button>
                    <button onclick="nextQuestion2()" class="nav-question-btn" id="nextQ2Btn">Next →</button>
                </div>
        
                <div id="feedback2" class="feedback"></div>
            </div>
        </div>
        
        <!-- Slide 8: Exercise 3 - Drag & Drop Matching -->
        <div class="slide">
            <div class="decorative-star star-1">🔄</div>
            <div class="decorative-star star-2">⭐</div>
            <div class="decorative-shape shape-triangle"></div>
            <div class="decorative-shape shape-square"></div>
        
            <h1 class="title-decoration">🔄 Exercise 3</h1>
            <h2>Drag & Drop Matching / Перетаскивание и сопоставление</h2>
        
            <div
                style="background: var(--background-white); border: 3px solid var(--accent-color); padding: 20px; border-radius: 20px; margin: 20px 0; position: relative; z-index: 10;">
                <p style="font-size: 1.2em; text-align: center; font-weight: 600;">
                    Drag the verbs to their correct <strong style="color: var(--warning-color);">past
                        forms</strong>!<br>
                    <span style="color: var(--text-muted); font-size: 0.9em;">Перетащи глаголы к их правильным <strong>формам
                            прошедшего времени</strong>!</span>
                </p>
            </div>
        
            <!-- Category Selection -->
            <div style="text-align: center; margin: 20px 0;">
                <label style="font-weight: 700; margin-right: 10px; font-size: 1.1em;">Choose Category:</label>
                <select id="categorySelector3" onchange="changeCategory3()"
                    style="padding: 10px 15px; border-radius: 15px; border: 3px solid var(--secondary-color); font-family: var(--font-family); font-weight: 600; font-size: 1em; background: var(--background-white);">
                    <option value="0">🌟 The Most Important Ones</option>
                    <option value="1">🏃 Movement & Actions</option>
                    <option value="2">📖 Expanding Vocabulary</option>
                    <option value="3">🧩 The Tricky Ones</option>
                </select>
            </div>
        
            <div id="exercise3" class="exercise-container">
                <div class="score-board">
                    <span>Matched: <strong id="score3">0</strong>/<strong id="totalPairs3">29</strong></span>
                    <button onclick="resetExercise3()" class="reset-btn">🔄</button>
                </div>
        
                <div class="drag-drop-container">
                    <h3 style="text-align: center; margin-bottom: 20px;">Drag these verbs: / Перетащи эти глаголы:
                    </h3>
                    <div id="draggableVerbs" class="draggable-verbs-container">
                        <!-- Draggable verbs will be populated by JavaScript -->
                    </div>
        
                    <div class="drop-zones" id="dropZones">
                        <!-- Drop zones will be populated by JavaScript -->
                    </div>
                </div>
        
                <div id="feedback3" class="feedback"></div>
            </div>
        </div>
        
        <!-- Slide 9: Exercise 4 - Memory Game -->
        <div class="slide">
            <div class="decorative-star star-1">🧠</div>
            <div class="decorative-star star-2">🎮</div>
            <div class="decorative-shape shape-circle"></div>
            <div class="decorative-shape shape-square"></div>
        
            <h1 class="title-decoration">🧠 Exercise 4</h1>
            <h2>Memory Matching Game / Игра на память</h2>
        
            <div
                style="background: var(--background-white); border: 3px solid var(--purple-color); padding: 20px; border-radius: 20px; margin: 20px 0; position: relative; z-index: 10;">
                <p style="font-size: 1.2em; text-align: center; font-weight: 600;">
                    Match the <strong style="color: var(--purple-color);">infinitive</strong> with its <strong
                        style="color: var(--primary-color);">translation</strong>!<br>
                    <span style="color: var(--text-muted); font-size: 0.9em;">Сопоставь<strong>инфинитив</strong> с
                        его <strong>переводом</strong>!</span>
                </p>
            </div>
        
            <!-- Category Selection -->
            <div style="text-align: center; margin: 20px 0;">
                <label style="font-weight: 700; margin-right: 10px; font-size: 1.1em;">Choose Category:</label>
                <select id="categorySelector4" onchange="changeCategory4()"
                    style="padding: 10px 15px; border-radius: 15px; border: 3px solid var(--secondary-color); font-family: var(--font-family); font-weight: 600; font-size: 1em; background: var(--background-white);">
                    <option value="0">🌟 The Most Important Ones</option>
                    <option value="1">🏃 Movement & Actions</option>
                    <option value="2">📖 Expanding Vocabulary</option>
                    <option value="3">🧩 The Tricky Ones</option>
                </select>
            </div>
        
            <div id="exercise4" class="exercise-container">
                <div class="score-board">
                    <span>Matches: <strong id="score4">0/29</strong></span>
                    <span>Attempts: <strong id="attempts4">0</strong></span>
                    <button onclick="resetExercise4()" class="reset-btn">🔄</button>
                </div>
        
                <div class="match-container">
                    <div class="match-column">
                        <h3 style="text-align: center; color: var(--secondary-color);">English</h3>
                        <div id="englishWords">
                            <!-- English verbs will be populated by JavaScript -->
                        </div>
                    </div>
                    <div class="match-column">
                        <h3 style="text-align: center; color: var(--primary-color);">Russian</h3>
                        <div id="russianWords">
                            <!-- Russian translations will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
        
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill4"></div>
                    </div>
                    <div class="progress-text" id="progressText4">0% Complete</div>
                </div>
        
                <div id="feedback4" class="feedback"></div>
            </div>
        </div>
        
        <!-- Slide 10: Story Exercise -->
        <div class="slide">
            <div class="decorative-star star-1">📚</div>
            <div class="decorative-star star-2">✍️</div>
            <div class="decorative-shape shape-triangle"></div>
            <div class="decorative-shape shape-circle"></div>
        
            <h1 class="title-decoration">📚 Exercise 5</h1>
            <h2>Complete the Story / Заверши историю</h2>
        
            <div
                style="background: var(--background-white); border: 3px solid var(--info-color); padding: 20px; border-radius: 20px; margin: 20px 0; position: relative; z-index: 10;">
                <p style="font-size: 1.2em; text-align: center; font-weight: 600;">
                    Click on the blanks and choose the correct verb forms!<br>
                    <span style="color: var(--text-muted); font-size: 0.9em;">Нажми на пропуски и выбери правильные формы глаголов!</span>
                </p>
            </div>
        
            <div id="exercise5" class="exercise-container">
                <div class="score-board">
                    <span>Filled: <strong id="score5">0</strong>/<strong id="totalBlanks5">13</strong></span>
                    <button onclick="resetExercise5()" class="reset-btn">🔄</button>
                </div>
        
                <div class="story-container">
                    <div class="story-text" id="storyText">
                        <!-- Story will be populated by JavaScript -->
                    </div>
        
                    <div class="story-controls">
                        <div class="story-progress">
                            <span>Progress: <strong id="storyProgress">0</strong>/<strong id="storyTotal">13</strong></span>
                        </div>
                        <div class="story-buttons">
                            <button onclick="checkStory()" class="check-btn" id="checkStoryBtn">✅ Check Story</button>
                        </div>
                    </div>
        
                    <div id="storyFeedback" class="feedback"></div>
                </div>
            </div>
        </div>
        
        <!-- Slide 11: Summary & Celebration -->
        <div class="slide">
            <div class="decorative-star star-1">🎉</div>
            <div class="decorative-star star-2">🌟</div>
            <div class="decorative-shape shape-square"></div>
            <div class="decorative-shape shape-circle"></div>
        
            <h1 class="title-decoration">🎉 Congratulations!</h1>
            <h2>You've learned 100 Irregular Verbs! / Ты выучил 100 неправильных глаголов!</h2>
        
            <div class="verb-categories-grid">
                <div class="verb-category-card common-verbs-card">
                    <h4>🌟 Common Verbs</h4>
                    <p style="font-size: 1.1em; font-weight: 600;">29 everyday verbs / 29 ежедневных глаголов</p>
                    <ul style="list-style: none; padding: 0; margin-top: 15px;">
                        <li>be → was/were → been</li>
                        <li>have → had → had</li>
                        <li>go → went → gone</li>
                        <li>do → did → done</li>
                        <li>say → said → said</li>
                    </ul>
                </div>
        
                <div class="verb-category-card action-verbs-card">
                    <h4>🏃 Action Verbs</h4>
                    <p style="font-size: 1.1em; font-weight: 600;">32 movement verbs / 32 глагола движения</p>
                    <ul style="list-style: none; padding: 0; margin-top: 15px;">
                        <li>run → ran → run</li>
                        <li>swim → swam → swum</li>
                        <li>fly → flew → flown</li>
                        <li>drive → drove → driven</li>
                        <li>throw → threw → thrown</li>
                    </ul>
                </div>
        
                <div class="verb-category-card tricky-verbs-card">
                    <h4>🧩 Challenge Verbs</h4>
                    <p style="font-size: 1.1em; font-weight: 600;">24 tricky verbs / 24 сложных глагола</p>
                    <ul style="list-style: none; padding: 0; margin-top: 15px;">
                        <li>bring → brought → brought</li>
                        <li>think → thought → thought</li>
                        <li>teach → taught → taught</li>
                        <li>catch → caught → caught</li>
                        <li>fight → fought → fought</li>
                    </ul>
                </div>
            </div>
        
            <div
                style="background: var(--background-white); border: 3px solid var(--success-color); padding: 35px; border-radius: 25px; text-align: center; margin: 30px 0; position: relative; z-index: 10; box-shadow: var(--shadow-medium);">
                <h3>🏆 Great Job, Vadim! / Отличная работа, Вадим!</h3>
                <p style="font-size: 1.3em; font-weight: 700; color: var(--success-color); line-height: 1.8;">
                    🎓 You've mastered 100+ irregular verbs! / Ты освоил 100+ неправильных глаголов!<br>
                    💪 Keep practicing every day / Продолжай практиковаться каждый день<br>
                    📚 Use them in sentences / Используй их в предложениях<br>
                    🌟 You're becoming an English master! / Ты становишься мастером английского языка!
                </p>
                <div style="margin-top: 20px;">
                    <button onclick="showSlide(0)"
                        style="background: var(--secondary-color); color: white; border: none; padding: 15px 30px; border-radius: 20px; font-size: 1.2em; font-weight: 700; cursor: pointer; margin: 10px; font-family: var(--font-family);">
                        🔄 Start Over / Начать сначала
                    </button>
                </div>
            </div>
        </div>

        <div class="navigation">
            <button class="nav-btn" id="prevBtn" onclick="changeSlide(-1)">← Back</button>
            <span class="slide-counter">
                <span id="currentSlide">1</span> of <span id="totalSlides">11</span>
            </span>
            <button class="nav-btn" id="nextBtn" onclick="changeSlide(1)">Next →</button>
        </div>
    </div>

    <script>// Global variables
        let currentSlideIndex = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;

        // 100+ Irregular Verbs Database
        const irregularVerbs = [
            // Common Verbs (1-29) 
            { infinitive: 'be', past: 'was/were', pastParticiple: 'been', translation: 'быть' },
            { infinitive: 'have', past: 'had', pastParticiple: 'had', translation: 'иметь' },
            { infinitive: 'do', past: 'did', pastParticiple: 'done', translation: 'сделать' },
            { infinitive: 'say', past: 'said', pastParticiple: 'said', translation: 'сказать' },
            { infinitive: 'go', past: 'went', pastParticiple: 'gone', translation: 'идти' },
            { infinitive: 'get', past: 'got', pastParticiple: 'got', translation: 'получать' },
            { infinitive: 'make', past: 'made', pastParticiple: 'made', translation: 'делать' },
            { infinitive: 'know', past: 'knew', pastParticiple: 'known', translation: 'знать' },
            { infinitive: 'think', past: 'thought', pastParticiple: 'thought', translation: 'думать' },
            { infinitive: 'take', past: 'took', pastParticiple: 'taken', translation: 'брать' },
            { infinitive: 'see', past: 'saw', pastParticiple: 'seen', translation: 'видеть' },
            { infinitive: 'come', past: 'came', pastParticiple: 'come', translation: 'приходить' },
            { infinitive: 'give', past: 'gave', pastParticiple: 'given', translation: 'давать' },
            { infinitive: 'find', past: 'found', pastParticiple: 'found', translation: 'находить' },
            { infinitive: 'tell', past: 'told', pastParticiple: 'told', translation: 'рассказывать' },
            { infinitive: 'feel', past: 'felt', pastParticiple: 'felt', translation: 'чувствовать' },
            { infinitive: 'leave', past: 'left', pastParticiple: 'left', translation: 'покидать' },
            { infinitive: 'put', past: 'put', pastParticiple: 'put', translation: 'класть' },
            { infinitive: 'bring', past: 'brought', pastParticiple: 'brought', translation: 'приносить' },
            { infinitive: 'begin', past: 'began', pastParticiple: 'begun', translation: 'начинать' },
            { infinitive: 'keep', past: 'kept', pastParticiple: 'kept', translation: 'держать' },
            { infinitive: 'hear', past: 'heard', pastParticiple: 'heard', translation: 'слышать' },
            { infinitive: 'let', past: 'let', pastParticiple: 'let', translation: 'позволять' },
            { infinitive: 'meet', past: 'met', pastParticiple: 'met', translation: 'встречать' },
            { infinitive: 'read', past: 'read', pastParticiple: 'read', translation: 'читать' },
            { infinitive: 'become', past: 'became', pastParticiple: 'become', translation: 'становиться' },
            { infinitive: 'pay', past: 'paid', pastParticiple: 'paid', translation: 'платить' },
            { infinitive: 'beat', past: 'beat', pastParticiple: 'beaten', translation: 'бить' },
            { infinitive: 'dig', past: 'dug', pastParticiple: 'dug', translation: 'копать' },

            // Action Verbs (30-60) 
            { infinitive: 'run', past: 'ran', pastParticiple: 'run', translation: 'бегать' },
            { infinitive: 'swim', past: 'swam', pastParticiple: 'swum', translation: 'плавать' },
            { infinitive: 'fly', past: 'flew', pastParticiple: 'flown', translation: 'летать' },
            { infinitive: 'drive', past: 'drove', pastParticiple: 'driven', translation: 'водить' },
            { infinitive: 'ride', past: 'rode', pastParticiple: 'ridden', translation: 'ездить верхом' },
            { infinitive: 'throw', past: 'threw', pastParticiple: 'thrown', translation: 'бросать' },
            { infinitive: 'catch', past: 'caught', pastParticiple: 'caught', translation: 'ловить' },
            { infinitive: 'hold', past: 'held', pastParticiple: 'held', translation: 'держать' },
            { infinitive: 'break', past: 'broke', pastParticiple: 'broken', translation: 'ломать' },
            { infinitive: 'build', past: 'built', pastParticiple: 'built', translation: 'строить' },
            { infinitive: 'buy', past: 'bought', pastParticiple: 'bought', translation: 'покупать' },
            { infinitive: 'sell', past: 'sold', pastParticiple: 'sold', translation: 'продавать' },
            { infinitive: 'fight', past: 'fought', pastParticiple: 'fought', translation: 'драться' },
            { infinitive: 'win', past: 'won', pastParticiple: 'won', translation: 'выигрывать' },
            { infinitive: 'lose', past: 'lost', pastParticiple: 'lost', translation: 'терять' },
            { infinitive: 'send', past: 'sent', pastParticiple: 'sent', translation: 'посылать' },
            { infinitive: 'spend', past: 'spent', pastParticiple: 'spent', translation: 'тратить' },
            { infinitive: 'stand', past: 'stood', pastParticiple: 'stood', translation: 'стоять' },
            { infinitive: 'sit', past: 'sat', pastParticiple: 'sat', translation: 'сидеть' },
            { infinitive: 'fall', past: 'fell', pastParticiple: 'fallen', translation: 'падать' },
            { infinitive: 'rise', past: 'rose', pastParticiple: 'risen', translation: 'подниматься' },
            { infinitive: 'grow', past: 'grew', pastParticiple: 'grown', translation: 'расти' },
            { infinitive: 'cut', past: 'cut', pastParticiple: 'cut', translation: 'резать' },
            { infinitive: 'hit', past: 'hit', pastParticiple: 'hit', translation: 'ударять' },
            { infinitive: 'shut', past: 'shut', pastParticiple: 'shut', translation: 'закрывать' },
            { infinitive: 'shoot', past: 'shot', pastParticiple: 'shot', translation: 'стрелять' },
            { infinitive: 'sink', past: 'sank', pastParticiple: 'sunk', translation: 'тонуть' },
            { infinitive: 'swing', past: 'swung', pastParticiple: 'swung', translation: 'качаться' },
            { infinitive: 'stick', past: 'stuck', pastParticiple: 'stuck', translation: 'прилипать' },
            { infinitive: 'sweep', past: 'swept', pastParticiple: 'swept', translation: 'подметать' },
            { infinitive: 'bend', past: 'bent', pastParticiple: 'bent', translation: 'сгибать' },

            // More Verbs (61-91)
            { infinitive: 'write', past: 'wrote', pastParticiple: 'written', translation: 'писать' },
            { infinitive: 'draw', past: 'drew', pastParticiple: 'drawn', translation: 'рисовать' },
            { infinitive: 'speak', past: 'spoke', pastParticiple: 'spoken', translation: 'говорить' },
            { infinitive: 'sing', past: 'sang', pastParticiple: 'sung', translation: 'петь' },
            { infinitive: 'ring', past: 'rang', pastParticiple: 'rung', translation: 'звонить' },
            { infinitive: 'drink', past: 'drank', pastParticiple: 'drunk', translation: 'пить' },
            { infinitive: 'eat', past: 'ate', pastParticiple: 'eaten', translation: 'есть' },
            { infinitive: 'sleep', past: 'slept', pastParticiple: 'slept', translation: 'спать' },
            { infinitive: 'wake', past: 'woke', pastParticiple: 'woken', translation: 'просыпаться' },
            { infinitive: 'wear', past: 'wore', pastParticiple: 'worn', translation: 'носить' },
            { infinitive: 'tear', past: 'tore', pastParticiple: 'torn', translation: 'рвать' },
            { infinitive: 'steal', past: 'stole', pastParticiple: 'stolen', translation: 'красть' },
            { infinitive: 'choose', past: 'chose', pastParticiple: 'chosen', translation: 'выбирать' },
            { infinitive: 'hide', past: 'hid', pastParticiple: 'hidden', translation: 'прятать' },
            { infinitive: 'show', past: 'showed', pastParticiple: 'shown', translation: 'показывать' },
            { infinitive: 'blow', past: 'blew', pastParticiple: 'blown', translation: 'дуть' },
            { infinitive: 'lead', past: 'led', pastParticiple: 'led', translation: 'вести' },
            { infinitive: 'feed', past: 'fed', pastParticiple: 'fed', translation: 'кормить' },
            { infinitive: 'bleed', past: 'bled', pastParticiple: 'bled', translation: 'кровоточить' },
            { infinitive: 'speed', past: 'sped', pastParticiple: 'sped', translation: 'мчаться' },
            { infinitive: 'breed', past: 'bred', pastParticiple: 'bred', translation: 'разводить' },
            { infinitive: 'freeze', past: 'froze', pastParticiple: 'frozen', translation: 'замерзать' },
            { infinitive: 'mean', past: 'meant', pastParticiple: 'meant', translation: 'означать' },
            { infinitive: 'learn', past: 'learnt', pastParticiple: 'learnt', translation: 'учиться' },
            { infinitive: 'burn', past: 'burnt', pastParticiple: 'burnt', translation: 'гореть' },
            { infinitive: 'shine', past: 'shone', pastParticiple: 'shone', translation: 'светить' },
            { infinitive: 'lay', past: 'laid', pastParticiple: 'laid', translation: 'класть' },
            { infinitive: 'lend', past: 'lent', pastParticiple: 'lent', translation: 'одалживать' },
            { infinitive: 'lean', past: 'leant', pastParticiple: 'leant', translation: 'наклоняться' },
            { infinitive: 'spill', past: 'spilt', pastParticiple: 'spilt', translation: 'проливать' },
            { infinitive: 'dream', past: 'dreamt', pastParticiple: 'dreamt', translation: 'мечтать/снить' },

            // Challenge Verbs (92-116) 
            { infinitive: 'teach', past: 'taught', pastParticiple: 'taught', translation: 'учить' },
            { infinitive: 'forget', past: 'forgot', pastParticiple: 'forgotten', translation: 'забывать' },
            { infinitive: 'forgive', past: 'forgave', pastParticiple: 'forgiven', translation: 'прощать' },
            { infinitive: 'forbid', past: 'forbade', pastParticiple: 'forbidden', translation: 'запрещать' },
            { infinitive: 'understand', past: 'understood', pastParticiple: 'understood', translation: 'понимать' },
            { infinitive: 'overcome', past: 'overcame', pastParticiple: 'overcome', translation: 'преодолевать' },
            { infinitive: 'withdraw', past: 'withdrew', pastParticiple: 'withdrawn', translation: 'снимать' },
            { infinitive: 'mistake', past: 'mistook', pastParticiple: 'mistaken', translation: 'ошибаться' },
            { infinitive: 'awake', past: 'awoke', pastParticiple: 'awoken', translation: 'будить' },
            { infinitive: 'shake', past: 'shook', pastParticiple: 'shaken', translation: 'трясти' },
            { infinitive: 'bite', past: 'bit', pastParticiple: 'bitten', translation: 'кусать' },
            { infinitive: 'split', past: 'split', pastParticiple: 'split', translation: 'разделять' },
            { infinitive: 'spread', past: 'spread', pastParticiple: 'spread', translation: 'распространять' },
            { infinitive: 'quit', past: 'quit', pastParticiple: 'quit', translation: 'бросать' },
            { infinitive: 'hurt', past: 'hurt', pastParticiple: 'hurt', translation: 'причинять боль' },
            { infinitive: 'cost', past: 'cost', pastParticiple: 'cost', translation: 'стоить' },
            { infinitive: 'bet', past: 'bet', pastParticiple: 'bet', translation: 'делать ставку' },
            { infinitive: 'set', past: 'set', pastParticiple: 'set', translation: 'устанавливать' },
            { infinitive: 'upset', past: 'upset', pastParticiple: 'upset', translation: 'расстраивать' },
            { infinitive: 'shrink', past: 'shrank', pastParticiple: 'shrunk', translation: 'сжиматься' },
            { infinitive: 'sting', past: 'stung', pastParticiple: 'stung', translation: 'жалить' },
            { infinitive: 'stink', past: 'stank', pastParticiple: 'stunk', translation: 'вонять' },
            { infinitive: 'swear', past: 'swore', pastParticiple: 'sworn', translation: 'клясться' }
        ];

        // Verb categories based on their indices in the array
        const verbCategories = {
            common: { start: 0, end: 29, name: "The Most Important Ones" },
            action: { start: 29, end: 61, name: "Movement & Actions" },
            expanding: { start: 61, end: 92, name: "Expanding Vocabulary" },
            tricky: { start: 92, end: 116, name: "The Tricky Ones" }
        };

        // Function to get verbs by category
        function getVerbsByCategory(category) {
            const cat = verbCategories[category];
            return irregularVerbs.slice(cat.start, cat.end);
        }

        // Function to generate wrong options for verbs
        function generateWrongOptions(verb, type = 'past') {
            const wrongOptions = [];

            if (type === 'past') {
                // Regular form with -ed
                wrongOptions.push(verb.infinitive + 'ed');
                // Another irregular verb's past form
                const otherVerbs = irregularVerbs.filter(v => v.infinitive !== verb.infinitive);
                const randomVerb = otherVerbs[Math.floor(Math.random() * otherVerbs.length)];
                wrongOptions.push(randomVerb.past);
            } else if (type === 'pastParticiple') {
                // Past form instead of past participle
                wrongOptions.push(verb.past);
                // Infinitive form
                wrongOptions.push(verb.infinitive);
            }

            return wrongOptions;
        }

        // Exercise 1 Data with all categories
        let exercise1Data = {
            score: 0,
            currentIndex: 0,
            currentCategory: 0,
            answered: [],
            userAnswers: [],
            categories: [
                {
                    name: "🌟 The Most Important Ones (1-29)",
                    questions: []
                },
                {
                    name: "🏃 Movement & Actions (30-61)",
                    questions: []
                },
                {
                    name: "📖 Expanding Vocabulary (62-92)",
                    questions: []
                },
                {
                    name: "🧩 The Tricky Ones (93-116)",
                    questions: []
                }
            ]
        };

        // Generate questions for Exercise 1
        function generateExercise1Questions() {
            Object.keys(verbCategories).forEach((catKey, index) => {
                const verbs = getVerbsByCategory(catKey);
                exercise1Data.categories[index].questions = verbs.map(verb => {
                    const wrongOptions = generateWrongOptions(verb, 'past');
                    const allOptions = [verb.past, ...wrongOptions].slice(0, 3);
                    return {
                        verb: verb.infinitive,
                        past: verb.past,
                        options: shuffleArray(allOptions),
                        translation: verb.translation
                    };
                });
            });
        }

        // Exercise 2 Data with all categories
        let exercise2Data = {
            score: 0,
            currentIndex: 0,
            currentCategory: 0,
            answered: [],
            userAnswers: [],
            categories: [
                {
                    name: "🌟 The Most Important Ones (1-29)",
                    questions: []
                },
                {
                    name: "🏃 Movement & Actions (30-61)",
                    questions: []
                },
                {
                    name: "📖 Expanding Vocabulary (62-92)",
                    questions: []
                },
                {
                    name: "🧩 The Tricky Ones (93-116)",
                    questions: []
                }
            ]
        };

        // Generate questions for Exercise 2
        function generateExercise2Questions() {
            Object.keys(verbCategories).forEach((catKey, index) => {
                const verbs = getVerbsByCategory(catKey);
                exercise2Data.categories[index].questions = verbs.map(verb => {
                    // Создаем специфичные предложения для каждого глагола
                    let sentence, translation, correctAnswer, wrongOptions;
                    
                    switch(verb.infinitive) {
                        // Common Verbs (1-29)
                        case 'be':
                            sentence = "Yesterday I _____ very happy.";
                            translation = "Вчера я был очень счастлив.";
                            correctAnswer = 'was';
                            wrongOptions = ['am', 'been'];
                            break;
                        case 'have':
                            sentence = "We _____ lunch at 12 o'clock.";
                            translation = "В 12 часов мы обедали.";
                            correctAnswer = 'had';
                            wrongOptions = ['have', 'has'];
                            break;
                        case 'do':
                            sentence = "She _____ her homework yesterday.";
                            translation = "Вчера она делала домашнее задание.";
                            correctAnswer = 'did';
                            wrongOptions = ['do', 'does'];
                            break;
                        case 'say':
                            sentence = "Tom _____ hello to his teacher.";
                            translation = "Том поздоровался с учителем.";
                            correctAnswer = 'said';
                            wrongOptions = ['say', 'says'];
                            break;
                        case 'go':
                            sentence = "They _____ to the park last Sunday.";
                            translation = "В прошлое воскресенье они ходили в парк.";
                            correctAnswer = 'went';
                            wrongOptions = ['go', 'gone'];
                            break;
                        case 'get':
                            sentence = "I _____ a new bike for my birthday.";
                            translation = "На день рождения я получил новый велосипед.";
                            correctAnswer = 'got';
                            wrongOptions = ['get', 'gets'];
                            break;
                        case 'make':
                            sentence = "Mom _____ a delicious cake.";
                            translation = "Мама приготовила вкусный торт.";
                            correctAnswer = 'made';
                            wrongOptions = ['make', 'makes'];
                            break;
                        case 'know':
                            sentence = "I _____ the answer to that question.";
                            translation = "Я знал ответ на этот вопрос.";
                            correctAnswer = 'knew';
                            wrongOptions = ['know', 'known'];
                            break;
                        case 'think':
                            sentence = "She _____ about her friends.";
                            translation = "Она думала о своих друзьях.";
                            correctAnswer = 'thought';
                            wrongOptions = ['think', 'thinks'];
                            break;
                        case 'take':
                            sentence = "He _____ many photos on vacation.";
                            translation = "На каникулах он сделал много фотографий.";
                            correctAnswer = 'took';
                            wrongOptions = ['take', 'taken'];
                            break;
                        case 'see':
                            sentence = "We _____ a beautiful rainbow.";
                            translation = "Мы видели красивую радугу.";
                            correctAnswer = 'saw';
                            wrongOptions = ['see', 'seen'];
                            break;
                        case 'come':
                            sentence = "My friends _____ to my party.";
                            translation = "Мои друзья пришли ко мне на вечеринку.";
                            correctAnswer = 'came';
                            wrongOptions = ['come', 'comes'];
                            break;
                        case 'give':
                            sentence = "Dad _____ me a present.";
                            translation = "Папа подарил мне подарок.";
                            correctAnswer = 'gave';
                            wrongOptions = ['give', 'given'];
                            break;
                        case 'find':
                            sentence = "I _____ my lost keys.";
                            translation = "Я нашел свои потерянные ключи.";
                            correctAnswer = 'found';
                            wrongOptions = ['find', 'finds'];
                            break;
                        case 'tell':
                            sentence = "Grandma _____ us a funny story.";
                            translation = "Бабушка рассказала нам смешную историю.";
                            correctAnswer = 'told';
                            wrongOptions = ['tell', 'tells'];
                            break;
                        case 'feel':
                            sentence = "I _____ tired after the long walk.";
                            translation = "После долгой прогулки я чувствовал усталость.";
                            correctAnswer = 'felt';
                            wrongOptions = ['feel', 'feels'];
                            break;
                        case 'leave':
                            sentence = "We _____ home at 8 o'clock.";
                            translation = "В 8 часов мы ушли из дома.";
                            correctAnswer = 'left';
                            wrongOptions = ['leave', 'leaves'];
                            break;
                        case 'put':
                            sentence = "She _____ the book on the table.";
                            translation = "Она положила книгу на стол.";
                            correctAnswer = 'put';
                            wrongOptions = ['puts', 'putting'];
                            break;
                        case 'bring':
                            sentence = "Tom _____ flowers for his mom.";
                            translation = "Том принес цветы для мамы.";
                            correctAnswer = 'brought';
                            wrongOptions = ['bring', 'brings'];
                            break;
                        case 'begin':
                            sentence = "The movie _____ at 7 PM.";
                            translation = "В 7 вечера начался фильм.";
                            correctAnswer = 'began';
                            wrongOptions = ['begin', 'begun'];
                            break;
                        case 'keep':
                            sentence = "I _____ my promise to help.";
                            translation = "Я сдержал обещание помочь.";
                            correctAnswer = 'kept';
                            wrongOptions = ['keep', 'keeps'];
                            break;
                        case 'hear':
                            sentence = "We _____ beautiful music.";
                            translation = "Мы слышали красивую музыку.";
                            correctAnswer = 'heard';
                            wrongOptions = ['hear', 'hears'];
                            break;
                        case 'let':
                            sentence = "Mom _____ me stay up late.";
                            translation = "Мама разрешила мне не спать допоздна.";
                            correctAnswer = 'let';
                            wrongOptions = ['lets', 'letting'];
                            break;
                        case 'meet':
                            sentence = "I _____ my new neighbor yesterday.";
                            translation = "Вчера я познакомился с новым соседом.";
                            correctAnswer = 'met';
                            wrongOptions = ['meet', 'meets'];
                            break;
                        case 'read':
                            sentence = "She _____ an interesting book.";
                            translation = "Она читала интересную книгу.";
                            correctAnswer = 'read';
                            wrongOptions = ['reads', 'reading'];
                            break;
                        case 'become':
                            sentence = "He _____ a doctor last year.";
                            translation = "В прошлом году он стал врачом.";
                            correctAnswer = 'became';
                            wrongOptions = ['become', 'becomes'];
                            break;
                        case 'pay':
                            sentence = "Dad _____ for the groceries.";
                            translation = "Папа заплатил за продукты.";
                            correctAnswer = 'paid';
                            wrongOptions = ['pay', 'pays'];
                            break;
                        case 'beat':
                            sentence = "Our team _____ the other team.";
                            translation = "Наша команда победила другую команду.";
                            correctAnswer = 'beat';
                            wrongOptions = ['beats', 'beaten'];
                            break;
                        case 'dig':
                            sentence = "The dog _____ a hole in the garden.";
                            translation = "Собака выкопала яму в саду.";
                            correctAnswer = 'dug';
                            wrongOptions = ['dig', 'digs'];
                            break;

                        // Action Verbs (30-61)
                        case 'run':
                            sentence = "I _____ to school this morning.";
                            translation = "Этим утром я бежал в школу.";
                            correctAnswer = 'ran';
                            wrongOptions = ['run', 'runs'];
                            break;
                        case 'swim':
                            sentence = "We _____ in the lake last summer.";
                            translation = "Прошлым летом мы плавали в озере.";
                            correctAnswer = 'swam';
                            wrongOptions = ['swim', 'swum'];
                            break;
                        case 'fly':
                            sentence = "The bird _____ high in the sky.";
                            translation = "Птица летала высоко в небе.";
                            correctAnswer = 'flew';
                            wrongOptions = ['fly', 'flown'];
                            break;
                        case 'drive':
                            sentence = "Dad _____ us to the beach.";
                            translation = "Папа отвез нас на пляж.";
                            correctAnswer = 'drove';
                            wrongOptions = ['drive', 'driven'];
                            break;
                        case 'ride':
                            sentence = "I _____ my bike to the park.";
                            translation = "Я ехал в парк на велосипеде.";
                            correctAnswer = 'rode';
                            wrongOptions = ['ride', 'ridden'];
                            break;
                        case 'throw':
                            sentence = "Tom _____ the ball to his friend.";
                            translation = "Том бросил мяч своему другу.";
                            correctAnswer = 'threw';
                            wrongOptions = ['throw', 'thrown'];
                            break;
                        case 'catch':
                            sentence = "I _____ the ball perfectly.";
                            translation = "Я отлично поймал мяч.";
                            correctAnswer = 'caught';
                            wrongOptions = ['catch', 'catches'];
                            break;
                        case 'hold':
                            sentence = "She _____ my hand tightly.";
                            translation = "Она крепко держала мою руку.";
                            correctAnswer = 'held';
                            wrongOptions = ['hold', 'holds'];
                            break;
                        case 'break':
                            sentence = "The glass _____ into pieces.";
                            translation = "Стакан разбился на кусочки.";
                            correctAnswer = 'broke';
                            wrongOptions = ['break', 'broken'];
                            break;
                        case 'build':
                            sentence = "We _____ a sandcastle on the beach.";
                            translation = "На пляже мы построили замок из песка.";
                            correctAnswer = 'built';
                            wrongOptions = ['build', 'builds'];
                            break;
                        case 'buy':
                            sentence = "Mom _____ new shoes for me.";
                            translation = "Мама купила мне новые туфли.";
                            correctAnswer = 'bought';
                            wrongOptions = ['buy', 'buys'];
                            break;
                        case 'sell':
                            sentence = "They _____ their old car.";
                            translation = "Они продали свою старую машину.";
                            correctAnswer = 'sold';
                            wrongOptions = ['sell', 'sells'];
                            break;
                        case 'fight':
                            sentence = "The knights _____ bravely.";
                            translation = "Рыцари храбро сражались.";
                            correctAnswer = 'fought';
                            wrongOptions = ['fight', 'fights'];
                            break;
                        case 'win':
                            sentence = "Our class _____ the competition.";
                            translation = "Наш класс выиграл соревнование.";
                            correctAnswer = 'won';
                            wrongOptions = ['win', 'wins'];
                            break;
                        case 'lose':
                            sentence = "I _____ my favorite pen.";
                            translation = "Я потерял свою любимую ручку.";
                            correctAnswer = 'lost';
                            wrongOptions = ['lose', 'loses'];
                            break;
                        case 'send':
                            sentence = "She _____ a letter to her friend.";
                            translation = "Она отправила письмо своему другу.";
                            correctAnswer = 'sent';
                            wrongOptions = ['send', 'sends'];
                            break;
                        case 'spend':
                            sentence = "We _____ all day at the zoo.";
                            translation = "Весь день мы провели в зоопарке.";
                            correctAnswer = 'spent';
                            wrongOptions = ['spend', 'spends'];
                            break;
                        case 'stand':
                            sentence = "Everyone _____ up when the teacher came in.";
                            translation = "Когда вошел учитель, все встали.";
                            correctAnswer = 'stood';
                            wrongOptions = ['stand', 'stands'];
                            break;
                        case 'sit':
                            sentence = "I _____ next to my best friend.";
                            translation = "Я сидел рядом со своим лучшим другом.";
                            correctAnswer = 'sat';
                            wrongOptions = ['sit', 'sits'];
                            break;
                        case 'fall':
                            sentence = "The leaves _____ from the trees.";
                            translation = "С деревьев упали листья.";
                            correctAnswer = 'fell';
                            wrongOptions = ['fall', 'fallen'];
                            break;
                        case 'rise':
                            sentence = "The sun _____ early this morning.";
                            translation = "Этим утром солнце встало рано.";
                            correctAnswer = 'rose';
                            wrongOptions = ['rise', 'risen'];
                            break;
                        case 'grow':
                            sentence = "The flowers _____ beautifully in spring.";
                            translation = "Весной цветы красиво росли.";
                            correctAnswer = 'grew';
                            wrongOptions = ['grow', 'grown'];
                            break;
                        case 'cut':
                            sentence = "Dad _____ the grass yesterday.";
                            translation = "Вчера папа косил траву.";
                            correctAnswer = 'cut';
                            wrongOptions = ['cuts', 'cutting'];
                            break;
                        case 'hit':
                            sentence = "The ball _____ the window.";
                            translation = "Мяч ударил в окно.";
                            correctAnswer = 'hit';
                            wrongOptions = ['hits', 'hitting'];
                            break;
                        case 'shut':
                            sentence = "I _____ the door quietly.";
                            translation = "Я тихо закрыл дверь.";
                            correctAnswer = 'shut';
                            wrongOptions = ['shuts', 'shutting'];
                            break;
                        case 'shoot':
                            sentence = "The photographer _____ many pictures.";
                            translation = "Фотограф сделал много снимков.";
                            correctAnswer = 'shot';
                            wrongOptions = ['shoot', 'shoots'];
                            break;
                        case 'sink':
                            sentence = "The toy boat _____ in the bathtub.";
                            translation = "В ванне утонула игрушечная лодка.";
                            correctAnswer = 'sank';
                            wrongOptions = ['sink', 'sunk'];
                            break;
                        case 'swing':
                            sentence = "The children _____ on the playground.";
                            translation = "Дети качались на детской площадке.";
                            correctAnswer = 'swung';
                            wrongOptions = ['swing', 'swings'];
                            break;
                        case 'stick':
                            sentence = "The sticker _____ to the wall.";
                            translation = "Наклейка приклеилась к стене.";
                            correctAnswer = 'stuck';
                            wrongOptions = ['stick', 'sticks'];
                            break;
                        case 'sweep':
                            sentence = "Mom _____ the floor this morning.";
                            translation = "Этим утром мама подмела пол.";
                            correctAnswer = 'swept';
                            wrongOptions = ['sweep', 'sweeps'];
                            break;
                        case 'bend':
                            sentence = "I _____ down to pick up the toy.";
                            translation = "Я наклонился, чтобы поднять игрушку.";
                            correctAnswer = 'bent';
                            wrongOptions = ['bend', 'bends'];
                            break;

                        // More Verbs (62-92)
                        case 'write':
                            sentence = "She _____ a beautiful poem.";
                            translation = "Она написала красивое стихотворение.";
                            correctAnswer = 'wrote';
                            wrongOptions = ['write', 'written'];
                            break;
                        case 'draw':
                            sentence = "Tom _____ a picture of his family.";
                            translation = "Том нарисовал портрет своей семьи.";
                            correctAnswer = 'drew';
                            wrongOptions = ['draw', 'drawn'];
                            break;
                        case 'speak':
                            sentence = "The teacher _____ slowly and clearly.";
                            translation = "Учитель говорил медленно и четко.";
                            correctAnswer = 'spoke';
                            wrongOptions = ['speak', 'spoken'];
                            break;
                        case 'sing':
                            sentence = "The birds _____ sweetly in the morning.";
                            translation = "Утром птицы сладко пели.";
                            correctAnswer = 'sang';
                            wrongOptions = ['sing', 'sung'];
                            break;
                        case 'ring':
                            sentence = "The phone _____ three times.";
                            translation = "Телефон прозвонил три раза.";
                            correctAnswer = 'rang';
                            wrongOptions = ['ring', 'rung'];
                            break;
                        case 'drink':
                            sentence = "I _____ fresh orange juice.";
                            translation = "Я пил свежий апельсиновый сок.";
                            correctAnswer = 'drank';
                            wrongOptions = ['drink', 'drunk'];
                            break;
                        case 'eat':
                            sentence = "We _____ pizza for dinner.";
                            translation = "На ужин мы ели пиццу.";
                            correctAnswer = 'ate';
                            wrongOptions = ['eat', 'eaten'];
                            break;
                        case 'sleep':
                            sentence = "The baby _____ peacefully.";
                            translation = "Малыш спокойно спал.";
                            correctAnswer = 'slept';
                            wrongOptions = ['sleep', 'sleeps'];
                            break;
                        case 'wake':
                            sentence = "I _____ up early this morning.";
                            translation = "Этим утром я проснулся рано.";
                            correctAnswer = 'woke';
                            wrongOptions = ['wake', 'woken'];
                            break;
                        case 'wear':
                            sentence = "She _____ a beautiful red dress.";
                            translation = "Она была в красивом красном платье.";
                            correctAnswer = 'wore';
                            wrongOptions = ['wear', 'worn'];
                            break;
                        case 'tear':
                            sentence = "The paper _____ easily.";
                            translation = "Бумага легко порвалась.";
                            correctAnswer = 'tore';
                            wrongOptions = ['tear', 'torn'];
                            break;
                        case 'steal':
                            sentence = "Someone _____ my bicycle.";
                            translation = "Кто-то украл мой велосипед.";
                            correctAnswer = 'stole';
                            wrongOptions = ['steal', 'stolen'];
                            break;
                        case 'choose':
                            sentence = "I _____ the blue shirt.";
                            translation = "Я выбрал синюю рубашку.";
                            correctAnswer = 'chose';
                            wrongOptions = ['choose', 'chosen'];
                            break;
                        case 'hide':
                            sentence = "The cat _____ under the bed.";
                            translation = "Кот спрятался под кроватью.";
                            correctAnswer = 'hid';
                            wrongOptions = ['hide', 'hidden'];
                            break;
                        case 'show':
                            sentence = "The teacher _____ us a magic trick.";
                            translation = "Учитель показал нам фокус.";
                            correctAnswer = 'showed';
                            wrongOptions = ['show', 'shown'];
                            break;
                        case 'blow':
                            sentence = "The wind _____ the leaves away.";
                            translation = "Ветер сдул листья.";
                            correctAnswer = 'blew';
                            wrongOptions = ['blow', 'blown'];
                            break;
                        case 'lead':
                            sentence = "The guide _____ us through the museum.";
                            translation = "Гид провел нас по музею.";
                            correctAnswer = 'led';
                            wrongOptions = ['lead', 'leads'];
                            break;
                        case 'feed':
                            sentence = "I _____ the birds in the park.";
                            translation = "В парке я кормил птиц.";
                            correctAnswer = 'fed';
                            wrongOptions = ['feed', 'feeds'];
                            break;
                        case 'bleed':
                            sentence = "My finger _____ when I cut it.";
                            translation = "Когда я порезался, палец кровоточил.";
                            correctAnswer = 'bled';
                            wrongOptions = ['bleed', 'bleeds'];
                            break;
                        case 'speed':
                            sentence = "The car _____ down the highway.";
                            translation = "Машина мчалась по шоссе.";
                            correctAnswer = 'sped';
                            wrongOptions = ['speed', 'speeds'];
                            break;
                        case 'breed':
                            sentence = "The farmer _____ horses on his ranch.";
                            translation = "На своем ранчо фермер разводил лошадей.";
                            correctAnswer = 'bred';
                            wrongOptions = ['breed', 'breeds'];
                            break;
                        case 'freeze':
                            sentence = "The water _____ in the cold night.";
                            translation = "В холодную ночь вода замерзла.";
                            correctAnswer = 'froze';
                            wrongOptions = ['freeze', 'frozen'];
                            break;
                        case 'mean':
                            sentence = "I didn't know what that word _____.";
                            translation = "Я не знал, что означает это слово.";
                            correctAnswer = 'meant';
                            wrongOptions = ['mean', 'means'];
                            break;
                        case 'learn':
                            sentence = "We _____ about dinosaurs in school.";
                            translation = "В школе мы изучали динозавров.";
                            correctAnswer = 'learnt';
                            wrongOptions = ['learn', 'learns'];
                            break;
                        case 'burn':
                            sentence = "The candle _____ all night long.";
                            translation = "Всю ночь горела свеча.";
                            correctAnswer = 'burnt';
                            wrongOptions = ['burn', 'burns'];
                            break;
                        case 'shine':
                            sentence = "The stars _____ brightly last night.";
                            translation = "Прошлой ночью звезды ярко светили.";
                            correctAnswer = 'shone';
                            wrongOptions = ['shine', 'shines'];
                            break;
                        case 'lay':
                            sentence = "The hen _____ an egg this morning.";
                            translation = "Этим утром курица снесла яйцо.";
                            correctAnswer = 'laid';
                            wrongOptions = ['lay', 'lays'];
                            break;
                        case 'lend':
                            sentence = "My friend _____ me his bicycle.";
                            translation = "Мой друг одолжил мне свой велосипед.";
                            correctAnswer = 'lent';
                            wrongOptions = ['lend', 'lends'];
                            break;
                        case 'lean':
                            sentence = "I _____ against the wall to rest.";
                            translation = "Чтобы отдохнуть, я прислонился к стене.";
                            correctAnswer = 'leant';
                            wrongOptions = ['lean', 'leans'];
                            break;
                        case 'spill':
                            sentence = "I accidentally _____ juice on my shirt.";
                            translation = "Я случайно пролил сок на рубашку.";
                            correctAnswer = 'spilt';
                            wrongOptions = ['spill', 'spills'];
                            break;
                        case 'dream':
                            sentence = "Last night I _____ about flying.";
                            translation = "Прошлой ночью мне снилось, что я летаю.";
                            correctAnswer = 'dreamt';
                            wrongOptions = ['dream', 'dreams'];
                            break;

                        // Challenge Verbs (93-116)
                        case 'teach':
                            sentence = "My grandmother _____ me how to cook.";
                            translation = "Моя бабушка научила меня готовить.";
                            correctAnswer = 'taught';
                            wrongOptions = ['teach', 'teaches'];
                            break;
                        case 'forget':
                            sentence = "I _____ to bring my lunch today.";
                            translation = "Сегодня я забыл принести обед.";
                            correctAnswer = 'forgot';
                            wrongOptions = ['forget', 'forgotten'];
                            break;
                        case 'forgive':
                            sentence = "Mom _____ me for breaking the vase.";
                            translation = "Мама простила меня за разбитую вазу.";
                            correctAnswer = 'forgave';
                            wrongOptions = ['forgive', 'forgiven'];
                            break;
                        case 'forbid':
                            sentence = "The teacher _____ us to use phones in class.";
                            translation = "Учитель запретил нам пользоваться телефонами на уроке.";
                            correctAnswer = 'forbade';
                            wrongOptions = ['forbid', 'forbidden'];
                            break;
                        case 'understand':
                            sentence = "Finally I _____ the math problem.";
                            translation = "Наконец я понял эту задачу по математике.";
                            correctAnswer = 'understood';
                            wrongOptions = ['understand', 'understands'];
                            break;
                        case 'overcome':
                            sentence = "She _____ her fear of heights.";
                            translation = "Она преодолела свой страх высоты.";
                            correctAnswer = 'overcame';
                            wrongOptions = ['overcome', 'overcomes'];
                            break;
                        case 'withdraw':
                            sentence = "Dad _____ money from the bank.";
                            translation = "Папа снял деньги в банке.";
                            correctAnswer = 'withdrew';
                            wrongOptions = ['withdraw', 'withdrawn'];
                            break;
                        case 'mistake':
                            sentence = "I _____ him for his twin brother.";
                            translation = "Я принял его за брата-близнеца.";
                            correctAnswer = 'mistook';
                            wrongOptions = ['mistake', 'mistaken'];
                            break;
                        case 'awake':
                            sentence = "The noise _____ the sleeping baby.";
                            translation = "Шум разбудил спящего малыша.";
                            correctAnswer = 'awoke';
                            wrongOptions = ['awake', 'awoken'];
                            break;
                        case 'shake':
                            sentence = "The dog _____ water off its fur.";
                            translation = "Собака стряхнула воду со своей шерсти.";
                            correctAnswer = 'shook';
                            wrongOptions = ['shake', 'shaken'];
                            break;
                        case 'bite':
                            sentence = "The mosquito _____ me on the arm.";
                            translation = "Комар укусил меня за руку.";
                            correctAnswer = 'bit';
                            wrongOptions = ['bite', 'bitten'];
                            break;
                        case 'split':
                            sentence = "The log _____ in half.";
                            translation = "Бревно раскололось пополам.";
                            correctAnswer = 'split';
                            wrongOptions = ['splits', 'splitting'];
                            break;
                        case 'spread':
                            sentence = "The news _____ quickly through the school.";
                            translation = "Новости быстро распространились по школе.";
                            correctAnswer = 'spread';
                            wrongOptions = ['spreads', 'spreading'];
                            break;
                        case 'quit':
                            sentence = "He _____ his job last month.";
                            translation = "В прошлом месяце он уволился с работы.";
                            correctAnswer = 'quit';
                            wrongOptions = ['quits', 'quitting'];
                            break;
                        case 'hurt':
                            sentence = "I _____ my knee when I fell.";
                            translation = "Когда я упал, то ушиб колено.";
                            correctAnswer = 'hurt';
                            wrongOptions = ['hurts', 'hurting'];
                            break;
                        case 'cost':
                            sentence = "The new toy _____ twenty dollars.";
                            translation = "Новая игрушка стоила двадцать долларов.";
                            correctAnswer = 'cost';
                            wrongOptions = ['costs', 'costing'];
                            break;
                        case 'bet':
                            sentence = "I _____ my friend that it would rain.";
                            translation = "Я поспорил с другом, что будет дождь.";
                            correctAnswer = 'bet';
                            wrongOptions = ['bets', 'betting'];
                            break;
                        case 'set':
                            sentence = "Mom _____ the table for dinner.";
                            translation = "Мама накрыла стол к ужину.";
                            correctAnswer = 'set';
                            wrongOptions = ['sets', 'setting'];
                            break;
                        case 'upset':
                            sentence = "The bad news _____ everyone.";
                            translation = "Плохие новости расстроили всех.";
                            correctAnswer = 'upset';
                            wrongOptions = ['upsets', 'upsetting'];
                            break;
                        case 'shrink':
                            sentence = "My sweater _____ in the wash.";
                            translation = "При стирке мой свитер сел.";
                            correctAnswer = 'shrank';
                            wrongOptions = ['shrink', 'shrunk'];
                            break;
                        case 'sting':
                            sentence = "A bee _____ me in the garden.";
                            translation = "В саду меня ужалила пчела.";
                            correctAnswer = 'stung';
                            wrongOptions = ['sting', 'stings'];
                            break;
                        case 'stink':
                            sentence = "The garbage _____ terribly.";
                            translation = "Мусор ужасно вонял.";
                            correctAnswer = 'stank';
                            wrongOptions = ['stink', 'stinks'];
                            break;
                        case 'swear':
                            sentence = "I _____ to tell the truth.";
                            translation = "Я поклялся говорить правду.";
                            correctAnswer = 'swore';
                            wrongOptions = ['swear', 'sworn'];
                            break;

                        default:
                            // Этот случай больше не должен использоваться, так как все глаголы покрыты
                            sentence = `Yesterday I _____ with my friends.`;
                            translation = `Вчера я ${verb.translation} с друзьями.`;
                            correctAnswer = verb.past;
                            wrongOptions = [verb.infinitive, verb.pastParticiple];
                            break;
                    }

                    // Убираем дубликаты и создаем финальные опции
                    const allOptions = [correctAnswer, ...wrongOptions.filter(opt => opt !== correctAnswer)].slice(0, 3);

                    return {
                        sentence: sentence,
                        verb: verb.infinitive,
                        correct: correctAnswer,
                        options: shuffleArray(allOptions),
                        translation: translation
                    };
                });
            });
        }


        // Exercise 3 Data with all categories
        let exercise3Data = {
            score: 0,
            currentCategory: 0,
            categories: [
                {
                    name: "🌟 The Most Important Ones (1-29)",
                    pairs: []
                },
                {
                    name: "🏃 Movement & Actions (30-61)",
                    pairs: []
                },
                {
                    name: "📖 Expanding Vocabulary (62-92)",
                    pairs: []
                },
                {
                    name: "🧩 The Tricky Ones (93-116)",
                    pairs: []
                }
            ]
        };

        // Generate pairs for Exercise 3
        function generateExercise3Pairs() {
            Object.keys(verbCategories).forEach((catKey, index) => {
                const verbs = getVerbsByCategory(catKey);
                // Use ALL verbs from each category
                exercise3Data.categories[index].pairs = verbs.map(verb => ({
                    present: verb.infinitive,
                    past: verb.past,
                    translation: verb.translation
                }));
            });
        }

        // Exercise 4 Data with all categories
        let exercise4Data = {
            score: 0,
            attempts: 0,
            selectedEnglish: null,
            selectedRussian: null,
            currentCategory: 0,
            matched: [],
            categories: [
                {
                    name: "🌟 The Most Important Ones (1-29)",
                    matches: []
                },
                {
                    name: "🏃 Movement & Actions (30-61)",
                    matches: []
                },
                {
                    name: "📖 Expanding Vocabulary (62-92)",
                    matches: []
                },
                {
                    name: "🧩 The Tricky Ones (93-116)",
                    matches: []
                }
            ]
        };

        // Generate matches for Exercise 4
        function generateExercise4Matches() {
            Object.keys(verbCategories).forEach((catKey, index) => {
                const verbs = getVerbsByCategory(catKey);
                // Use ALL verbs from each category
                exercise4Data.categories[index].matches = verbs.map(verb => ({
                    english: verb.infinitive,
                    russian: verb.translation
                }));
            });
        }

        // Exercise 5 Data with categories
        let exercise5Data = {
            score: 0,
            currentStory: 0,
            currentCategory: 0,
            stories: [] // Will be populated by category
        };

        // Generate stories for Exercise 5
    function generateExercise5Stories() {
        const storyTemplatesPerCategory = [
            // Common verbs stories (1-29) - ALL 29 verbs
            [
                {
                    title: "🌟 Tom's Amazing Adventure Week",
                    titleRu: "Удивительная неделя приключений Тома",
                    content: `
                    <p class="story-paragraph">
                        Last Monday <span class="story-blank" data-blank="blank1" onclick="showDropdown(this)">_____</span> a beautiful sunny day. 
                        Tom <span class="story-blank" data-blank="blank2" onclick="showDropdown(this)">_____</span> up early and 
                        <span class="story-blank" data-blank="blank3" onclick="showDropdown(this)">_____</span> his breakfast quickly. 
                        He <span class="story-blank" data-blank="blank4" onclick="showDropdown(this)">_____</span> to go on an adventure because 
                        his friends <span class="story-blank" data-blank="blank5" onclick="showDropdown(this)">_____</span> him about a secret treasure.
                        Tom <span class="story-blank" data-blank="blank6" onclick="showDropdown(this)">_____</span> that this would be the best week ever!
                    </p>
                    <p class="story-paragraph">
                        When Tom <span class="story-blank" data-blank="blank7" onclick="showDropdown(this)">_____</span> to the forest, 
                        he <span class="story-blank" data-blank="blank8" onclick="showDropdown(this)">_____</span> his best friend Sarah near the old oak tree. 
                        She <span class="story-blank" data-blank="blank9" onclick="showDropdown(this)">_____</span> him a mysterious map and 
                        <span class="story-blank" data-blank="blank10" onclick="showDropdown(this)">_____</span>, "We must find the treasure!"
                        They <span class="story-blank" data-blank="blank11" onclick="showDropdown(this)">_____</span> to follow the map together.
                    </p>
                    <p class="story-paragraph">
                        The children <span class="story-blank" data-blank="blank12" onclick="showDropdown(this)">_____</span> walking for two hours. 
                        They <span class="story-blank" data-blank="blank13" onclick="showDropdown(this)">_____</span> many interesting things: 
                        colorful birds, beautiful flowers, and a small waterfall. 
                        Tom <span class="story-blank" data-blank="blank14" onclick="showDropdown(this)">_____</span> some berries 
                        and <span class="story-blank" data-blank="blank15" onclick="showDropdown(this)">_____</span> them in his backpack.
                        Sarah <span class="story-blank" data-blank="blank16" onclick="showDropdown(this)">_____</span> a strange noise in the bushes.
                    </p>
                    <p class="story-paragraph">
                        "What was that?" Tom asked. Sarah <span class="story-blank" data-blank="blank17" onclick="showDropdown(this)">_____</span> him 
                        it was probably just a rabbit. They <span class="story-blank" data-blank="blank18" onclick="showDropdown(this)">_____</span> 
                        their adventure and soon <span class="story-blank" data-blank="blank19" onclick="showDropdown(this)">_____</span> 
                        an old wooden chest under a big rock. Tom <span class="story-blank" data-blank="blank20" onclick="showDropdown(this)">_____</span> 
                        the chest and discovered it was full of old coins and jewels!
                    </p>
                    <p class="story-paragraph">
                        The treasure <span class="story-blank" data-blank="blank21" onclick="showDropdown(this)">_____</span> them very happy. 
                        They <span class="story-blank" data-blank="blank22" onclick="showDropdown(this)">_____</span> a small celebration dance right there. 
                        Sarah <span class="story-blank" data-blank="blank23" onclick="showDropdown(this)">_____</span> a beautiful story 
                        about brave treasure hunters in one of her books. 
                        Tom <span class="story-blank" data-blank="blank24" onclick="showDropdown(this)">_____</span> Sarah's parents 
                        about their discovery when they returned home.
                    </p>
                    <p class="story-paragraph">
                        That evening, the children <span class="story-blank" data-blank="blank25" onclick="showDropdown(this)">_____</span> 
                        their parents about the amazing adventure. 
                        Tom's mother <span class="story-blank" data-blank="blank26" onclick="showDropdown(this)">_____</span> for the treasure 
                        with her credit card at the local museum, because it was historically valuable. 
                        The museum director <span class="story-blank" data-blank="blank27" onclick="showDropdown(this)">_____</span> the drums 
                        to celebrate this important discovery. 
                        Tom and Sarah <span class="story-blank" data-blank="blank28" onclick="showDropdown(this)">_____</span> famous 
                        treasure hunters in their town. 
                        They <span class="story-blank" data-blank="blank29" onclick="showDropdown(this)">_____</span> a deep hole 
                        in their backyard to hide more treasures for future adventures!
                    </p>`,
                    blanks: [
                        { id: 'blank1', options: ['was', 'is', 'were'], correct: 'was' },
                        { id: 'blank2', options: ['wake', 'woke', 'waken'], correct: 'woke' },
                        { id: 'blank3', options: ['had', 'have', 'has'], correct: 'had' },
                        { id: 'blank4', options: ['want', 'wanted', 'wants'], correct: 'wanted' },
                        { id: 'blank5', options: ['told', 'tell', 'tells'], correct: 'told' },
                        { id: 'blank6', options: ['think', 'thought', 'thinks'], correct: 'thought' },
                        { id: 'blank7', options: ['went', 'go', 'goes'], correct: 'went' },
                        { id: 'blank8', options: ['met', 'meet', 'meets'], correct: 'met' },
                        { id: 'blank9', options: ['gave', 'give', 'gives'], correct: 'gave' },
                        { id: 'blank10', options: ['said', 'say', 'says'], correct: 'said' },
                        { id: 'blank11', options: ['began', 'begin', 'begins'], correct: 'began' },
                        { id: 'blank12', options: ['kept', 'keep', 'keeps'], correct: 'kept' },
                        { id: 'blank13', options: ['saw', 'see', 'sees'], correct: 'saw' },
                        { id: 'blank14', options: ['found', 'find', 'finds'], correct: 'found' },
                        { id: 'blank15', options: ['put', 'puts', 'putting'], correct: 'put' },
                        { id: 'blank16', options: ['heard', 'hear', 'hears'], correct: 'heard' },
                        { id: 'blank17', options: ['told', 'tell', 'tells'], correct: 'told' },
                        { id: 'blank18', options: ['kept', 'keep', 'keeps'], correct: 'kept' },
                        { id: 'blank19', options: ['found', 'find', 'finds'], correct: 'found' },
                        { id: 'blank20', options: ['got', 'get', 'gets'], correct: 'got' },
                        { id: 'blank21', options: ['made', 'make', 'makes'], correct: 'made' },
                        { id: 'blank22', options: ['did', 'do', 'does'], correct: 'did' },
                        { id: 'blank23', options: ['read', 'reads', 'reading'], correct: 'read' },
                        { id: 'blank24', options: ['met', 'meet', 'meets'], correct: 'met' },
                        { id: 'blank25', options: ['told', 'tell', 'tells'], correct: 'told' },
                        { id: 'blank26', options: ['paid', 'pay', 'pays'], correct: 'paid' },
                        { id: 'blank27', options: ['beat', 'beats', 'beaten'], correct: 'beat' },
                        { id: 'blank28', options: ['became', 'become', 'becomes'], correct: 'became' },
                        { id: 'blank29', options: ['dug', 'dig', 'digs'], correct: 'dug' }
                    ]
                }
            ],
            
            // Action verbs stories (30-61) - ALL 32 verbs
            [
                {
                    title: "🏃 The Amazing Sports Festival",
                    titleRu: "Удивительный спортивный фестиваль",
                    content: `
                    <p class="story-paragraph">
                        Last Saturday was the most exciting day of the year - the Annual Sports Festival! 
                        All the children <span class="story-blank" data-blank="blank1" onclick="showDropdown(this)">_____</span> 
                        to the sports field very early. Emma <span class="story-blank" data-blank="blank2" onclick="showDropdown(this)">_____</span> 
                        like a dolphin in the swimming pool. Meanwhile, Jack <span class="story-blank" data-blank="blank3" onclick="showDropdown(this)">_____</span> 
                        like a bird across the running track.
                    </p>
                    <p class="story-paragraph">
                        The children <span class="story-blank" data-blank="blank4" onclick="showDropdown(this)">_____</span> 
                        their bicycles to different stations. Tom <span class="story-blank" data-blank="blank5" onclick="showDropdown(this)">_____</span> 
                        the football perfectly to his teammate. Sarah <span class="story-blank" data-blank="blank6" onclick="showDropdown(this)">_____</span> 
                        the ball when it came flying towards her. The coach <span class="story-blank" data-blank="blank7" onclick="showDropdown(this)">_____</span> 
                        the whistle to show he was proud of the children.
                    </p>
                    <p class="story-paragraph">
                        During the building competition, the teams <span class="story-blank" data-blank="blank8" onclick="showDropdown(this)">_____</span> 
                        amazing towers with blocks. Some children <span class="story-blank" data-blank="blank9" onclick="showDropdown(this)">_____</span> 
                        toy cars from the sports shop. Others <span class="story-blank" data-blank="blank10" onclick="showDropdown(this)">_____</span> 
                        their old toys to buy new sports equipment.
                    </p>
                    <p class="story-paragraph">
                        The most exciting event was the fighting game (safe play fighting with foam swords). 
                        Everyone <span class="story-blank" data-blank="blank11" onclick="showDropdown(this)">_____</span> 
                        fairly and had great fun. At the end, Lisa <span class="story-blank" data-blank="blank12" onclick="showDropdown(this)">_____</span> 
                        the first prize! Nobody <span class="story-blank" data-blank="blank13" onclick="showDropdown(this)">_____</span> 
                        - everyone was a winner that day.
                    </p>
                    <p class="story-paragraph">
                        The teachers <span class="story-blank" data-blank="blank14" onclick="showDropdown(this)">_____</span> 
                        congratulation messages to all the parents. The children 
                        <span class="story-blank" data-blank="blank15" onclick="showDropdown(this)">_____</span> 
                        all their energy having fun. They <span class="story-blank" data-blank="blank16" onclick="showDropdown(this)">_____</span> 
                        in circles, cheering for their friends.
                    </p>
                    <p class="story-paragraph">
                        During lunch time, everyone <span class="story-blank" data-blank="blank17" onclick="showDropdown(this)">_____</span> 
                        quietly in the grass, tired but happy. Nobody <span class="story-blank" data-blank="blank18" onclick="showDropdown(this)">_____</span> 
                        down during the games - everyone was too excited! 
                        The balloons <span class="story-blank" data-blank="blank19" onclick="showDropdown(this)">_____</span> 
                        up high into the sky, celebrating the wonderful day.
                    </p>
                    <p class="story-paragraph">
                        The sunflowers in the school garden <span class="story-blank" data-blank="blank20" onclick="showDropdown(this)">_____</span> 
                        taller during the summer. The gardener <span class="story-blank" data-blank="blank21" onclick="showDropdown(this)">_____</span> 
                        the grass shorter before the festival. Tom accidentally 
                        <span class="story-blank" data-blank="blank22" onclick="showDropdown(this)">_____</span> 
                        his knee on a small stone, but he was brave and continued playing.
                    </p>
                    <p class="story-paragraph">
                        Sarah <span class="story-blank" data-blank="blank23" onclick="showDropdown(this)">_____</span> 
                        the target perfectly with her foam arrow. The school bell 
                        <span class="story-blank" data-blank="blank24" onclick="showDropdown(this)">_____</span> 
                        loudly to announce the winners. The children 
                        <span class="story-blank" data-blank="blank25" onclick="showDropdown(this)">_____</span> 
                        all the doors of the school to run outside and celebrate.
                    </p>
                    <p class="story-paragraph">
                        In the water games, one brave child <span class="story-blank" data-blank="blank26" onclick="showDropdown(this)">_____</span> 
                        to the bottom of the shallow pool to get a toy. 
                        Everyone <span class="story-blank" data-blank="blank27" onclick="showDropdown(this)">_____</span> 
                        happily on the playground swings. The playground equipment 
                        <span class="story-blank" data-blank="blank28" onclick="showDropdown(this)">_____</span> 
                        a little when it was muddy from the morning rain.
                    </p>
                    <p class="story-paragraph">
                        The custodian <span class="story-blank" data-blank="blank29" onclick="showDropdown(this)">_____</span> 
                        all the leaves from the sports field before the games started. 
                        The children carefully <span class="story-blank" data-blank="blank30" onclick="showDropdown(this)">_____</span> 
                        their knees to stretch before running. 
                        At the end of the day, everyone agreed it was the most fun they had ever had!
                    </p>`,
                    blanks: [
                        { id: 'blank1', options: ['ran', 'run', 'running'], correct: 'ran' },
                        { id: 'blank2', options: ['swam', 'swim', 'swims'], correct: 'swam' },
                        { id: 'blank3', options: ['flew', 'fly', 'flies'], correct: 'flew' },
                        { id: 'blank4', options: ['drove', 'drive', 'drives'], correct: 'drove' },
                        { id: 'blank5', options: ['threw', 'throw', 'throws'], correct: 'threw' },
                        { id: 'blank6', options: ['caught', 'catch', 'catches'], correct: 'caught' },
                        { id: 'blank7', options: ['held', 'hold', 'holds'], correct: 'held' },
                        { id: 'blank8', options: ['built', 'build', 'builds'], correct: 'built' },
                        { id: 'blank9', options: ['bought', 'buy', 'buys'], correct: 'bought' },
                        { id: 'blank10', options: ['sold', 'sell', 'sells'], correct: 'sold' },
                        { id: 'blank11', options: ['fought', 'fight', 'fights'], correct: 'fought' },
                        { id: 'blank12', options: ['won', 'win', 'wins'], correct: 'won' },
                        { id: 'blank13', options: ['lost', 'lose', 'loses'], correct: 'lost' },
                        { id: 'blank14', options: ['sent', 'send', 'sends'], correct: 'sent' },
                        { id: 'blank15', options: ['spent', 'spend', 'spends'], correct: 'spent' },
                        { id: 'blank16', options: ['stood', 'stand', 'stands'], correct: 'stood' },
                        { id: 'blank17', options: ['sat', 'sit', 'sits'], correct: 'sat' },
                        { id: 'blank18', options: ['fell', 'fall', 'falls'], correct: 'fell' },
                        { id: 'blank19', options: ['rose', 'rise', 'rises'], correct: 'rose' },
                        { id: 'blank20', options: ['grew', 'grow', 'grows'], correct: 'grew' },
                        { id: 'blank21', options: ['cut', 'cuts', 'cutting'], correct: 'cut' },
                        { id: 'blank22', options: ['hit', 'hits', 'hitting'], correct: 'hit' },
                        { id: 'blank23', options: ['shot', 'shoot', 'shoots'], correct: 'shot' },
                        { id: 'blank24', options: ['shut', 'shuts', 'shutting'], correct: 'shut' },
                        { id: 'blank25', options: ['shut', 'shuts', 'shutting'], correct: 'shut' },
                        { id: 'blank26', options: ['sank', 'sink', 'sinks'], correct: 'sank' },
                        { id: 'blank27', options: ['swung', 'swing', 'swings'], correct: 'swung' },
                        { id: 'blank28', options: ['stuck', 'stick', 'sticks'], correct: 'stuck' },
                        { id: 'blank29', options: ['swept', 'sweep', 'sweeps'], correct: 'swept' },
                        { id: 'blank30', options: ['bent', 'bend', 'bends'], correct: 'bent' },
                        { id: 'blank31', options: ['rode', 'ride', 'rides'], correct: 'rode' },
                        { id: 'blank32', options: ['broke', 'break', 'breaks'], correct: 'broke' }
                    ]
                }
            ],
            
            // Expanding vocabulary stories (62-92) - ALL 31 verbs
            [
                {
                    title: "📖 The Magical Art School Day",
                    titleRu: "Волшебный день в художественной школе",
                    content: `
                    <p class="story-paragraph">
                        Yesterday was the most creative day at Emma's art school! 
                        First, the teacher <span class="story-blank" data-blank="blank1" onclick="showDropdown(this)">_____</span> 
                        a beautiful letter to her students about their new project. 
                        Emma <span class="story-blank" data-blank="blank2" onclick="showDropdown(this)">_____</span> 
                        a magnificent rainbow with her colored pencils.
                    </p>
                    <p class="story-paragraph">
                        During music time, the children <span class="story-blank" data-blank="blank3" onclick="showDropdown(this)">_____</span> 
                        loudly and beautifully together. Tom <span class="story-blank" data-blank="blank4" onclick="showDropdown(this)">_____</span> 
                        his favorite song on the piano. The school bell 
                        <span class="story-blank" data-blank="blank5" onclick="showDropdown(this)">_____</span> 
                        to announce snack time.
                    </p>
                    <p class="story-paragraph">
                        At lunch, Sarah <span class="story-blank" data-blank="blank6" onclick="showDropdown(this)">_____</span> 
                        fresh apple juice from her bottle. Everyone 
                        <span class="story-blank" data-blank="blank7" onclick="showDropdown(this)">_____</span> 
                        delicious sandwiches that their parents had prepared. 
                        After lunch, some children <span class="story-blank" data-blank="blank8" onclick="showDropdown(this)">_____</span> 
                        peacefully in the rest area.
                    </p>
                    <p class="story-paragraph">
                        When they <span class="story-blank" data-blank="blank9" onclick="showDropdown(this)">_____</span> 
                        up from their nap, the children were ready for more activities. 
                        Emma <span class="story-blank" data-blank="blank10" onclick="showDropdown(this)">_____</span> 
                        her beautiful new dress that her grandmother had made. 
                        Tom accidentally <span class="story-blank" data-blank="blank11" onclick="showDropdown(this)">_____</span> 
                        a small hole in his paper, but he turned it into part of his artwork.
                    </p>
                    <p class="story-paragraph">
                        During drama class, a little mouse (a toy) "disappeared" and the children pretended it had 
                        <span class="story-blank" data-blank="blank12" onclick="showDropdown(this)">_____</span> 
                        some cheese from the play kitchen. They had to find the "thief"! 
                        Sarah <span class="story-blank" data-blank="blank13" onclick="showDropdown(this)">_____</span> 
                        to act like a detective and solve the mystery.
                    </p>
                    <p class="story-paragraph">
                        The teacher <span class="story-blank" data-blank="blank14" onclick="showDropdown(this)">_____</span> 
                        everyone the final artwork of the day. 
                        The wind from the open window <span class="story-blank" data-blank="blank15" onclick="showDropdown(this)">_____</span> 
                        gently through the classroom. The teacher 
                        <span class="story-blank" data-blank="blank16" onclick="showDropdown(this)">_____</span> 
                        the children to the art exhibition in the school hallway.
                    </p>
                    <p class="story-paragraph">
                        The school cook <span class="story-blank" data-blank="blank17" onclick="showDropdown(this)">_____</span> 
                        the hungry children delicious snacks. One little rabbit from the school garden had 
                        <span class="story-blank" data-blank="blank18" onclick="showDropdown(this)">_____</span> 
                        from a small cut on its paw, but the veterinarian helped it get better.
                    </p>
                    <p class="story-paragraph">
                        The race car toy <span class="story-blank" data-blank="blank19" onclick="showDropdown(this)">_____</span> 
                        around the classroom track incredibly fast! 
                        The hamsters in the class pet corner had 
                        <span class="story-blank" data-blank="blank20" onclick="showDropdown(this)">_____</span> 
                        many baby hamsters over the summer.
                    </p>
                    <p class="story-paragraph">
                        Emma <span class="story-blank" data-blank="blank21" onclick="showDropdown(this)">_____</span> 
                        some ice cubes in the water and watched them slowly disappear. 
                        "What does 'disappear' <span class="story-blank" data-blank="blank22" onclick="showDropdown(this)">_____</span>?" 
                        asked Tom. The teacher explained that it means "to become invisible."
                    </p>
                    <p class="story-paragraph">
                        The children <span class="story-blank" data-blank="blank23" onclick="showDropdown(this)">_____</span> 
                        so much about art and creativity that day. 
                        Sarah's face accidentally <span class="story-blank" data-blank="blank24" onclick="showDropdown(this)">_____</span> 
                        when she touched the hot tea cup (not too hot, just warm).
                    </p>
                    <p class="story-paragraph">
                        The golden stars on the classroom wall <span class="story-blank" data-blank="blank25" onclick="showDropdown(this)">_____</span> 
                        brightly in the afternoon sunlight. 
                        Tom helped by <span class="story-blank" data-blank="blank26" onclick="showDropdown(this)">_____</span> 
                        the art supplies carefully on the table for the next day.
                    </p>
                    <p class="story-paragraph">
                        The teacher <span class="story-blank" data-blank="blank27" onclick="showDropdown(this)">_____</span> 
                        some art books to Emma to take home. 
                        The children <span class="story-blank" data-blank="blank28" onclick="showDropdown(this)">_____</span> 
                        forward to see their artwork better. 
                        One child accidentally <span class="story-blank" data-blank="blank29" onclick="showDropdown(this)">_____</span> 
                        water on the floor, so everyone helped clean it up.
                    </p>
                    <p class="story-paragraph">
                        At the end of the day, the children had wonderful 
                        <span class="story-blank" data-blank="blank30" onclick="showDropdown(this)">_____</span> 
                        about becoming famous artists one day. 
                        They all went home feeling very creative and happy!
                    </p>`,
                    blanks: [
                        { id: 'blank1', options: ['wrote', 'write', 'writes'], correct: 'wrote' },
                        { id: 'blank2', options: ['drew', 'draw', 'draws'], correct: 'drew' },
                        { id: 'blank3', options: ['spoke', 'speak', 'speaks'], correct: 'spoke' },
                        { id: 'blank4', options: ['sang', 'sing', 'sings'], correct: 'sang' },
                        { id: 'blank5', options: ['rang', 'ring', 'rings'], correct: 'rang' },
                        { id: 'blank6', options: ['drank', 'drink', 'drinks'], correct: 'drank' },
                        { id: 'blank7', options: ['ate', 'eat', 'eats'], correct: 'ate' },
                        { id: 'blank8', options: ['slept', 'sleep', 'sleeps'], correct: 'slept' },
                        { id: 'blank9', options: ['woke', 'wake', 'wakes'], correct: 'woke' },
                        { id: 'blank10', options: ['wore', 'wear', 'wears'], correct: 'wore' },
                        { id: 'blank11', options: ['tore', 'tear', 'tears'], correct: 'tore' },
                        { id: 'blank12', options: ['stole', 'steal', 'steals'], correct: 'stole' },
                        { id: 'blank13', options: ['chose', 'choose', 'chooses'], correct: 'chose' },
                        { id: 'blank14', options: ['showed', 'show', 'shows'], correct: 'showed' },
                        { id: 'blank15', options: ['blew', 'blow', 'blows'], correct: 'blew' },
                        { id: 'blank16', options: ['led', 'lead', 'leads'], correct: 'led' },
                        { id: 'blank17', options: ['fed', 'feed', 'feeds'], correct: 'fed' },
                        { id: 'blank18', options: ['bled', 'bleed', 'bleeds'], correct: 'bled' },
                        { id: 'blank19', options: ['sped', 'speed', 'speeds'], correct: 'sped' },
                        { id: 'blank20', options: ['bred', 'breed', 'breeds'], correct: 'bred' },
                        { id: 'blank21', options: ['froze', 'freeze', 'freezes'], correct: 'froze' },
                        { id: 'blank22', options: ['meant', 'mean', 'means'], correct: 'mean' },
                        { id: 'blank23', options: ['learnt', 'learn', 'learns'], correct: 'learnt' },
                        { id: 'blank24', options: ['burnt', 'burn', 'burns'], correct: 'burnt' },
                        { id: 'blank25', options: ['shone', 'shine', 'shines'], correct: 'shone' },
                        { id: 'blank26', options: ['laid', 'lay', 'lays'], correct: 'laid' },
                        { id: 'blank27', options: ['lent', 'lend', 'lends'], correct: 'lent' },
                        { id: 'blank28', options: ['leant', 'lean', 'leans'], correct: 'leant' },
                        { id: 'blank29', options: ['spilt', 'spill', 'spills'], correct: 'spilt' },
                        { id: 'blank30', options: ['dreamt', 'dream', 'dreams'], correct: 'dreamt' },
                        { id: 'blank31', options: ['hid', 'hide', 'hides'], correct: 'hid' }
                    ]
                }
            ],
            
            // Tricky verbs stories (93-116) - ALL 24 verbs
            [
                {
                    title: "🧩 The Mystery of the Magic School",
                    titleRu: "Загадка волшебной школы",
                    content: `
                    <p class="story-paragraph">
                        Professor Williams was the kindest teacher at Magic School. 
                        Every morning, she <span class="story-blank" data-blank="blank1" onclick="showDropdown(this)">_____</span> 
                        her young students about friendship, kindness, and magic. 
                        One day, something very strange happened that nobody could understand.
                    </p>
                    <p class="story-paragraph">
                        Emma had completely <span class="story-blank" data-blank="blank2" onclick="showDropdown(this)">_____</span> 
                        about her homework again! But Professor Williams always 
                        <span class="story-blank" data-blank="blank3" onclick="showDropdown(this)">_____</span> 
                        her students when they made mistakes. 
                        "We never <span class="story-blank" data-blank="blank4" onclick="showDropdown(this)">_____</span> 
                        students to feel bad about learning," she said gently.
                    </p>
                    <p class="story-paragraph">
                        Suddenly, Tom <span class="story-blank" data-blank="blank5" onclick="showDropdown(this)">_____</span> 
                        what the teacher meant when she spoke about the "hidden treasure" in the school. 
                        "We must <span class="story-blank" data-blank="blank6" onclick="showDropdown(this)">_____</span> 
                        all the challenges to find it!" said Sarah excitedly. 
                        But first, they had to solve the mystery that had 
                        <span class="story-blank" data-blank="blank7" onclick="showDropdown(this)">_____</span> 
                        their friend Lucy to disappear from the playground!
                    </p>
                    <p class="story-paragraph">
                        The children <span class="story-blank" data-blank="blank8" onclick="showDropdown(this)">_____</span> 
                        up early that morning, feeling excited about their adventure. 
                        Tom <span class="story-blank" data-blank="blank9" onclick="showDropdown(this)">_____</span> 
                        the magic bell loudly to call all his friends together. 
                        A friendly dog had accidentally <span class="story-blank" data-blank="blank10" onclick="showDropdown(this)">_____</span> 
                        Tom's hand while playing, but it didn't hurt at all.
                    </p>
                    <p class="story-paragraph">
                        The mysterious cake in the teacher's room had 
                        <span class="story-blank" data-blank="blank11" onclick="showDropdown(this)">_____</span> 
                        into two perfect pieces by itself! 
                        The magical news about Lucy <span class="story-blank" data-blank="blank12" onclick="showDropdown(this)">_____</span> 
                        quickly throughout the entire school. 
                        Nobody wanted to <span class="story-blank" data-blank="blank13" onclick="showDropdown(this)">_____</span> 
                        looking for their friend.
                    </p>
                    <p class="story-paragraph">
                        Finding Lucy <span class="story-blank" data-blank="blank14" onclick="showDropdown(this)">_____</span> 
                        them a lot of energy, but they never gave up. 
                        The magic spells in this school never <span class="story-blank" data-blank="blank15" onclick="showDropdown(this)">_____</span> 
                        anyone - they only helped and protected. 
                        Emma had <span class="story-blank" data-blank="blank16" onclick="showDropdown(this)">_____</span> 
                        a coin and wished for Lucy to be safe.
                    </p>
                    <p class="story-paragraph">
                        The teachers had <span class="story-blank" data-blank="blank17" onclick="showDropdown(this)">_____</span> 
                        up the school rules very clearly for everyone's safety. 
                        Playing with magic sometimes made strange things happen, and Lucy had 
                        <span class="story-blank" data-blank="blank18" onclick="showDropdown(this)">_____</span> 
                        Tom's magic wand by mistake when she became invisible.
                    </p>
                    <p class="story-paragraph">
                        The magic flowers in the garden had <span class="story-blank" data-blank="blank19" onclick="showDropdown(this)">_____</span> 
                        smaller during the winter, but spring was coming and they were growing again. 
                        A magic bee had <span class="story-blank" data-blank="blank20" onclick="showDropdown(this)">_____</span> 
                        Sarah's finger very gently - it felt like a tiny tickle! 
                        The old witch's cauldron <span class="story-blank" data-blank="blank21" onclick="showDropdown(this)">_____</span> 
                        terribly because she was making a potion to help find Lucy.
                    </p>
                    <p class="story-paragraph">
                        Tom <span class="story-blank" data-blank="blank22" onclick="showDropdown(this)">_____</span> 
                        by all the magical creatures to always tell the truth. 
                        Finally, the children found Lucy hiding in the magic library! 
                        She had become invisible by accident and was perfectly safe. 
                        Everyone was so happy that they all 
                        <span class="story-blank" data-blank="blank23" onclick="showDropdown(this)">_____</span> 
                        each other to be best friends forever. 
                        The principal had <span class="story-blank" data-blank="blank24" onclick="showDropdown(this)">_____</span> 
                        everyone to meet in the Great Hall to celebrate finding Lucy!
                    </p>
                    <p class="story-paragraph">
                        From that day on, all the children understood that magic was wonderful, 
                        but friendship was the most powerful magic of all. 
                        They promised to always help each other and never let anyone feel lost or alone again.
                    </p>`,
                    blanks: [
                        { id: 'blank1', options: ['taught', 'teach', 'teaches'], correct: 'taught' },
                        { id: 'blank2', options: ['forgotten', 'forget', 'forgot'], correct: 'forgotten' },
                        { id: 'blank3', options: ['forgave', 'forgive', 'forgives'], correct: 'forgave' },
                        { id: 'blank4', options: ['forbid', 'forbade', 'forbidden'], correct: 'forbid' },
                        { id: 'blank5', options: ['understood', 'understand', 'understands'], correct: 'understood' },
                        { id: 'blank6', options: ['overcome', 'overcame', 'overcomes'], correct: 'overcome' },
                        { id: 'blank7', options: ['caused', 'cause', 'causes'], correct: 'caused' },
                        { id: 'blank8', options: ['awoke', 'awake', 'awakes'], correct: 'awoke' },
                        { id: 'blank9', options: ['shook', 'shake', 'shakes'], correct: 'shook' },
                        { id: 'blank10', options: ['bitten', 'bite', 'bit'], correct: 'bitten' },
                        { id: 'blank11', options: ['split', 'splits', 'splitting'], correct: 'split' },
                        { id: 'blank12', options: ['spread', 'spreads', 'spreading'], correct: 'spread' },
                        { id: 'blank13', options: ['quit', 'quits', 'quitting'], correct: 'quit' },
                        { id: 'blank14', options: ['cost', 'costs', 'costing'], correct: 'cost' },
                        { id: 'blank15', options: ['hurt', 'hurts', 'hurting'], correct: 'hurt' },
                        { id: 'blank16', options: ['bet', 'bets', 'betting'], correct: 'bet' },
                        { id: 'blank17', options: ['set', 'sets', 'setting'], correct: 'set' },
                        { id: 'blank18', options: ['upset', 'upsets', 'upsetting'], correct: 'upset' },
                        { id: 'blank19', options: ['shrunk', 'shrink', 'shrinks'], correct: 'shrunk' },
                        { id: 'blank20', options: ['stung', 'sting', 'stings'], correct: 'stung' },
                        { id: 'blank21', options: ['stank', 'stink', 'stinks'], correct: 'stank' },
                        { id: 'blank22', options: ['swore', 'swear', 'swears'], correct: 'swore' },
                        { id: 'blank23', options: ['swore', 'swear', 'swears'], correct: 'swore' },
                        { id: 'blank24', options: ['set', 'sets', 'setting'], correct: 'set' }
                    ]
                }
            ]
        ];

        exercise5Data.stories = storyTemplatesPerCategory;
    }

    // Update the createStory function to handle longer stories
    function createStory() {
            const storyContainer = document.getElementById('storyText');
            if (!storyContainer) return;

            const currentStory = exercise5Data.stories[exercise5Data.currentCategory][exercise5Data.currentStory];

            const storyHTML = `
            <div class="story-title">
                <h4>${currentStory.title}</h4>
                <p style="color: var(--text-muted); font-size: 0.9em;">${currentStory.titleRu}</p>
            </div>
            ${currentStory.content}
            `;

            storyContainer.innerHTML = storyHTML;

            // Update total blanks count
            const totalBlanks = currentStory.blanks.length;
            document.getElementById('storyProgress').textContent = `0/${totalBlanks}`;
        }

        // Utility function to shuffle array
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // Navigation functions
        function showSlide(index) {
            slides.forEach(slide => slide.classList.remove('active'));
            slides[index].classList.add('active');

            document.getElementById('currentSlide').textContent = index + 1;
            document.getElementById('totalSlides').textContent = totalSlides;

            document.getElementById('prevBtn').disabled = index === 0;
            document.getElementById('nextBtn').disabled = index === totalSlides - 1;

            currentSlideIndex = index;
        }

        function changeSlide(direction) {
            currentSlideIndex += direction;
            if (currentSlideIndex < 0) currentSlideIndex = 0;
            if (currentSlideIndex >= totalSlides) currentSlideIndex = totalSlides - 1;
            showSlide(currentSlideIndex);
        }

        // Keyboard navigation
        document.addEventListener('keydown', function (e) {
            if (e.key === 'ArrowLeft') changeSlide(-1);
            if (e.key === 'ArrowRight') changeSlide(1);
        });

        // Flashcard functions
        function createFlashcard(verb, index) {
            const flashcard = document.createElement('div');
            flashcard.className = 'flashcard';
            flashcard.onclick = () => flipFlashcard(flashcard);

            flashcard.innerHTML = `
       <div class="flashcard-inner">
           <div class="flashcard-front">
               <div class="verb-infinitive">${verb.infinitive}</div>
               <div class="verb-translation">${verb.translation}</div>
           </div>
           <div class="flashcard-back">
               <div class="verb-forms">
                   <div class="past-form">Past: ${verb.past}</div>
                   <div class="past-participle">Past Participle: ${verb.pastParticiple}</div>
               </div>
           </div>
       </div>
   `;

            return flashcard;
        }

        function flipFlashcard(card) {
            card.classList.toggle('flipped');
        }

        function populateFlashcards(gridId, startIndex, endIndex) {
            const grid = document.getElementById(gridId);
            if (!grid) return;

            grid.innerHTML = '';

            for (let i = startIndex; i < endIndex && i < irregularVerbs.length; i++) {
                const verb = irregularVerbs[i];
                const flashcard = createFlashcard(verb, i);
                grid.appendChild(flashcard);
            }
        }

        // Initialize arrays for current category
        function initCategoryArrays(exerciseData) {
            const currentCategoryQuestions = exerciseData.categories[exerciseData.currentCategory].questions;
            exerciseData.answered = Array(currentCategoryQuestions.length).fill(false);
            exerciseData.userAnswers = Array(currentCategoryQuestions.length).fill(null);
        }

        // EXERCISE 1: Past Form Quiz
        function changeCategory1() {
            const selector = document.getElementById('categorySelector1');
            exercise1Data.currentCategory = parseInt(selector.value);
            exercise1Data.score = 0;
            exercise1Data.currentIndex = 0;

            initCategoryArrays(exercise1Data);

            const currentCategoryQuestions = exercise1Data.categories[exercise1Data.currentCategory].questions;
            document.getElementById('score1').textContent = '0';
            document.getElementById('totalQuestions1').textContent = currentCategoryQuestions.length;
            document.getElementById('maxQ1').textContent = currentCategoryQuestions.length;
            document.getElementById('feedback1').innerHTML = '';

            showQuestion1();
        }

        function initExercise1() {
            initCategoryArrays(exercise1Data);
            showQuestion1();
        }

        function showQuestion1() {
            const currentCategoryQuestions = exercise1Data.categories[exercise1Data.currentCategory].questions;
            const currentQuestion = currentCategoryQuestions[exercise1Data.currentIndex];

            document.getElementById('currentVerb1').textContent = currentQuestion.verb;
            document.getElementById('verbMeaning1').textContent = currentQuestion.translation;
            document.getElementById('currentQ1').textContent = exercise1Data.currentIndex + 1;

            const optionsContainer = document.getElementById('options1');
            optionsContainer.innerHTML = '';

            currentQuestion.options.forEach(option => {
                const optionEl = document.createElement('div');
                optionEl.className = 'option-card';
                optionEl.textContent = option;
                optionEl.onclick = function (event) {
                    event.preventDefault();
                    event.stopPropagation();
                    checkAnswer1(option);
                };

                if (exercise1Data.answered[exercise1Data.currentIndex]) {
                    optionEl.style.pointerEvents = 'none';
                    if (option === currentQuestion.past) {
                        optionEl.classList.add('correct');
                    } else if (option === exercise1Data.userAnswers[exercise1Data.currentIndex]) {
                        optionEl.classList.add('incorrect');
                    }
                }

                optionsContainer.appendChild(optionEl);
            });

            updateNavButtons1();
            updateFeedback1();
        }

        function checkAnswer1(selectedAnswer) {
            if (exercise1Data.answered[exercise1Data.currentIndex]) return;

            const currentCategoryQuestions = exercise1Data.categories[exercise1Data.currentCategory].questions;
            const currentQuestion = currentCategoryQuestions[exercise1Data.currentIndex];
            const correct = selectedAnswer === currentQuestion.past;
            const options = document.querySelectorAll('#options1 .option-card');

            exercise1Data.answered[exercise1Data.currentIndex] = true;
            exercise1Data.userAnswers[exercise1Data.currentIndex] = selectedAnswer;

            options.forEach(option => {
                option.style.pointerEvents = 'none';
                if (option.textContent === currentQuestion.past) {
                    option.classList.add('correct');
                } else if (option.textContent === selectedAnswer && !correct) {
                    option.classList.add('incorrect');
                }
            });

            if (correct) {
                exercise1Data.score++;
                document.getElementById('score1').textContent = exercise1Data.score;
            }

            updateFeedback1();
            updateNavButtons1();
        }

        function updateFeedback1() {
            const feedbackEl = document.getElementById('feedback1');

            if (!exercise1Data.answered[exercise1Data.currentIndex]) {
                feedbackEl.innerHTML = '';
                return;
            }

            const currentCategoryQuestions = exercise1Data.categories[exercise1Data.currentCategory].questions;
            const currentQuestion = currentCategoryQuestions[exercise1Data.currentIndex];
            const userAnswer = exercise1Data.userAnswers[exercise1Data.currentIndex];
            const correct = userAnswer === currentQuestion.past;

            if (correct) {
                feedbackEl.innerHTML = `
        <div class="feedback correct">
            🎉 Correct! "${currentQuestion.verb}" → "${currentQuestion.past}"
        </div>`;
            } else {
                feedbackEl.innerHTML = `
        <div class="feedback incorrect">
            😅 Incorrect! "${currentQuestion.verb}" → "${currentQuestion.past}"
        </div>`;
            }

            if (exercise1Data.answered.every(a => a)) {
                const categoryName = exercise1Data.categories[exercise1Data.currentCategory].name;
                setTimeout(() => {
                    feedbackEl.innerHTML += `
            <div style="background: var(--success-light); padding: 20px; border-radius: 15px; margin-top: 15px; border: 2px solid var(--success-color);">
                🏆 Category "${categoryName}" completed! Score: ${exercise1Data.score}/${currentCategoryQuestions.length}
            </div>`;
                }, 1000);
            }
        }

        function nextQuestion1() {
            const currentCategoryQuestions = exercise1Data.categories[exercise1Data.currentCategory].questions;
            if (exercise1Data.currentIndex < currentCategoryQuestions.length - 1) {
                exercise1Data.currentIndex++;
                showQuestion1();
            }
        }

        function prevQuestion1() {
            if (exercise1Data.currentIndex > 0) {
                exercise1Data.currentIndex--;
                showQuestion1();
            }
        }

        function updateNavButtons1() {
            const prevBtn = document.getElementById('prevQ1Btn');
            const nextBtn = document.getElementById('nextQ1Btn');
            const currentCategoryQuestions = exercise1Data.categories[exercise1Data.currentCategory].questions;

            if (prevBtn) prevBtn.disabled = exercise1Data.currentIndex === 0;
            if (nextBtn) nextBtn.disabled = exercise1Data.currentIndex === currentCategoryQuestions.length - 1;
        }

        function resetExercise1() {
            exercise1Data.score = 0;
            exercise1Data.currentIndex = 0;

            initCategoryArrays(exercise1Data);

            document.getElementById('score1').textContent = '0';
            document.getElementById('feedback1').innerHTML = '';

            showQuestion1();
        }

        // EXERCISE 2: Past Simple Challenge
        function changeCategory2() {
            const selector = document.getElementById('categorySelector2');
            exercise2Data.currentCategory = parseInt(selector.value);
            exercise2Data.score = 0;
            exercise2Data.currentIndex = 0;

            initCategoryArrays(exercise2Data);

            const currentCategoryQuestions = exercise2Data.categories[exercise2Data.currentCategory].questions;
            document.getElementById('score2').textContent = '0';
            document.getElementById('totalQuestions2').textContent = currentCategoryQuestions.length;
            document.getElementById('maxQ2').textContent = currentCategoryQuestions.length;
            document.getElementById('feedback2').innerHTML = '';

            showQuestion2();
        }

        function initExercise2() {
            initCategoryArrays(exercise2Data);
            showQuestion2();
        }

        function showQuestion2() {
            const currentCategoryQuestions = exercise2Data.categories[exercise2Data.currentCategory].questions;
            const currentQuestion = currentCategoryQuestions[exercise2Data.currentIndex];

            document.getElementById('currentSentence2').textContent = currentQuestion.sentence;
            document.getElementById('verbHint2').textContent = currentQuestion.translation; // Показываем перевод предложения
            document.getElementById('currentQ2').textContent = exercise2Data.currentIndex + 1;

            const optionsContainer = document.getElementById('options2');
            optionsContainer.innerHTML = '';

            currentQuestion.options.forEach(option => {
                const optionEl = document.createElement('div');
                optionEl.className = 'option-card';
                optionEl.textContent = option;
                optionEl.onclick = function (event) {
                    event.preventDefault();
                    event.stopPropagation();
                    checkAnswer2(option);
                };

                if (exercise2Data.answered[exercise2Data.currentIndex]) {
                    optionEl.style.pointerEvents = 'none';
                    if (option === currentQuestion.correct) {
                        optionEl.classList.add('correct');
                    } else if (option === exercise2Data.userAnswers[exercise2Data.currentIndex]) {
                        optionEl.classList.add('incorrect');
                    }
                }

                optionsContainer.appendChild(optionEl);
            });

            updateNavButtons2();
            updateFeedback2();
        }

        function checkAnswer2(selectedAnswer) {
            if (exercise2Data.answered[exercise2Data.currentIndex]) return;

            const currentCategoryQuestions = exercise2Data.categories[exercise2Data.currentCategory].questions;
            const currentQuestion = currentCategoryQuestions[exercise2Data.currentIndex];
            const correct = selectedAnswer === currentQuestion.correct;
            const options = document.querySelectorAll('#options2 .option-card');

            exercise2Data.answered[exercise2Data.currentIndex] = true;
            exercise2Data.userAnswers[exercise2Data.currentIndex] = selectedAnswer;

            options.forEach(option => {
                option.style.pointerEvents = 'none';
                if (option.textContent === currentQuestion.correct) {
                    option.classList.add('correct');
                } else if (option.textContent === selectedAnswer && !correct) {
                    option.classList.add('incorrect');
                }
            });

            if (correct) {
                exercise2Data.score++;
                document.getElementById('score2').textContent = exercise2Data.score;
            }

            updateFeedback2();
            updateNavButtons2();
        }

        function updateFeedback2() {
            const feedbackEl = document.getElementById('feedback2');

            if (!exercise2Data.answered[exercise2Data.currentIndex]) {
                feedbackEl.innerHTML = '';
                return;
            }

            const currentCategoryQuestions = exercise2Data.categories[exercise2Data.currentCategory].questions;
            const currentQuestion = currentCategoryQuestions[exercise2Data.currentIndex];
            const userAnswer = exercise2Data.userAnswers[exercise2Data.currentIndex];
            const correct = userAnswer === currentQuestion.correct;

            if (correct) {
                feedbackEl.innerHTML = `
        <div class="feedback correct">
            🎉 Correct! "${currentQuestion.correct}" is the right form!
        </div>`;
            } else {
                feedbackEl.innerHTML = `
        <div class="feedback incorrect">
            😅 Incorrect! The correct answer is: "${currentQuestion.correct}"
        </div>`;
            }

            if (exercise2Data.answered.every(a => a)) {
                const categoryName = exercise2Data.categories[exercise2Data.currentCategory].name;
                setTimeout(() => {
                    feedbackEl.innerHTML += `
            <div style="background: var(--success-light); padding: 20px; border-radius: 15px; margin-top: 15px; border: 2px solid var(--success-color);">
                🏆 Category "${categoryName}" completed! Score: ${exercise2Data.score}/${currentCategoryQuestions.length}
            </div>`;
                }, 1000);
            }
        }

        function nextQuestion2() {
            const currentCategoryQuestions = exercise2Data.categories[exercise2Data.currentCategory].questions;
            if (exercise2Data.currentIndex < currentCategoryQuestions.length - 1) {
                exercise2Data.currentIndex++;
                showQuestion2();
            }
        }

        function prevQuestion2() {
            if (exercise2Data.currentIndex > 0) {
                exercise2Data.currentIndex--;
                showQuestion2();
            }
        }

        function updateNavButtons2() {
            const prevBtn = document.getElementById('prevQ2Btn');
            const nextBtn = document.getElementById('nextQ2Btn');
            const currentCategoryQuestions = exercise2Data.categories[exercise2Data.currentCategory].questions;

            if (prevBtn) prevBtn.disabled = exercise2Data.currentIndex === 0;
            if (nextBtn) nextBtn.disabled = exercise2Data.currentIndex === currentCategoryQuestions.length - 1;
        }

        function resetExercise2() {
            exercise2Data.score = 0;
            exercise2Data.currentIndex = 0;

            initCategoryArrays(exercise2Data);

            document.getElementById('score2').textContent = '0';
            document.getElementById('feedback2').innerHTML = '';

            showQuestion2();
        }

        // EXERCISE 3: Drag & Drop
        function changeCategory3() {
            const selector = document.getElementById('categorySelector3');
            exercise3Data.currentCategory = parseInt(selector.value);
            exercise3Data.score = 0;

            const currentPairs = exercise3Data.categories[exercise3Data.currentCategory].pairs;
            document.getElementById('score3').textContent = '0';
            document.getElementById('totalPairs3').textContent = currentPairs.length;
            document.getElementById('feedback3').innerHTML = '';

            createDragDropElements();
        }

        function initExercise3() {
            const currentPairs = exercise3Data.categories[exercise3Data.currentCategory].pairs;
            document.getElementById('totalPairs3').textContent = currentPairs.length;
            createDragDropElements();
        }

        function createDragDropElements() {
            const container = document.getElementById('draggableVerbs');
            const dropZones = document.getElementById('dropZones');

            if (!container || !dropZones) return;

            container.innerHTML = '';
            dropZones.innerHTML = '';

            const currentPairs = exercise3Data.categories[exercise3Data.currentCategory].pairs;

            // Shuffle the pairs to make it more challenging
            const shuffledPairs = shuffleArray([...currentPairs]);

            // Create draggable verbs
            shuffledPairs.forEach(pair => {
                const verbEl = document.createElement('div');
                verbEl.className = 'draggable-verb';
                verbEl.textContent = pair.present;
                verbEl.draggable = true;
                verbEl.dataset.verb = pair.present;
                verbEl.dataset.past = pair.past;
                container.appendChild(verbEl);
            });

            // Create drop zones (also shuffled)
            shuffleArray([...currentPairs]).forEach(pair => {
                const dropZone = document.createElement('div');
                dropZone.className = 'drop-zone';
                dropZone.dataset.past = pair.past;
                dropZone.innerHTML = `<strong>${pair.past}</strong>`;
                dropZones.appendChild(dropZone);
            });

            // Update the score display
            document.getElementById('score3').textContent = `0/${currentPairs.length}`;

            addDragListeners();
        }

        function addDragListeners() {
            const draggables = document.querySelectorAll('.draggable-verb');
            const dropZones = document.querySelectorAll('.drop-zone');

            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', function (e) {
                    e.dataTransfer.setData('text/plain', this.dataset.verb);
                    this.classList.add('dragging');
                });

                draggable.addEventListener('dragend', function () {
                    this.classList.remove('dragging');
                });
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', function (e) {
                    e.preventDefault();
                    this.classList.add('drag-over');
                });

                zone.addEventListener('dragleave', function () {
                    this.classList.remove('drag-over');
                });

                zone.addEventListener('drop', function (e) {
                    e.preventDefault();
                    this.classList.remove('drag-over');

                    const droppedVerb = e.dataTransfer.getData('text/plain');
                    const correctPast = this.dataset.past;

                    const currentPairs = exercise3Data.categories[exercise3Data.currentCategory].pairs;
                    const verbData = currentPairs.find(pair => pair.present === droppedVerb);

                    if (verbData && verbData.past === correctPast) {
                        this.classList.add('correct');
                        this.innerHTML = `<strong>${correctPast}</strong><br><small>✅ ${droppedVerb} → ${correctPast}</small>`;
                        exercise3Data.score++;
                        document.getElementById('score3').textContent = exercise3Data.score;

                        // Remove the dragged element
                        const draggedEl = document.querySelector(`[data-verb="${droppedVerb}"]`);
                        if (draggedEl) draggedEl.remove();

                        if (exercise3Data.score === currentPairs.length) {
                            document.getElementById('feedback3').innerHTML = `
                       <div class="feedback correct">
                           🎉 Perfect! All verbs matched correctly!
                       </div>`;
                        }
                    } else {
                        this.classList.add('incorrect');
                        setTimeout(() => this.classList.remove('incorrect'), 1000);
                    }
                });
            });
        }

        function resetExercise3() {
            exercise3Data.score = 0;
            document.getElementById('score3').textContent = '0';
            document.getElementById('feedback3').innerHTML = '';
            createDragDropElements();
        }

        // EXERCISE 4: Memory Game
        function changeCategory4() {
            const selector = document.getElementById('categorySelector4');
            exercise4Data.currentCategory = parseInt(selector.value);
            exercise4Data.score = 0;
            exercise4Data.attempts = 0;
            exercise4Data.selectedEnglish = null;
            exercise4Data.selectedRussian = null;
            exercise4Data.matched = [];

            const currentMatches = exercise4Data.categories[exercise4Data.currentCategory].matches;
            document.getElementById('score4').textContent = `0/${currentMatches.length}`;
            document.getElementById('attempts4').textContent = '0';
            document.getElementById('progressFill4').style.width = '0%';
            document.getElementById('progressText4').textContent = '0% Complete';
            document.getElementById('feedback4').innerHTML = '';

            createMemoryGame();
        }

        function initExercise4() {
            const currentMatches = exercise4Data.categories[exercise4Data.currentCategory].matches;
            document.getElementById('score4').textContent = `0/${currentMatches.length}`;
            createMemoryGame();
        }

        function createMemoryGame() {
            const englishContainer = document.getElementById('englishWords');
            const russianContainer = document.getElementById('russianWords');

            if (!englishContainer || !russianContainer) return;

            englishContainer.innerHTML = '';
            russianContainer.innerHTML = '';

            const currentMatches = exercise4Data.categories[exercise4Data.currentCategory].matches;

            currentMatches.forEach((match, index) => {
                // English word
                const englishEl = document.createElement('div');
                englishEl.className = 'match-item';
                englishEl.textContent = match.english;
                englishEl.dataset.english = match.english;
                englishEl.onclick = () => selectEnglish(englishEl);
                englishContainer.appendChild(englishEl);

                // Russian word
                const russianEl = document.createElement('div');
                russianEl.className = 'match-item';
                russianEl.textContent = match.russian;
                russianEl.dataset.russian = match.russian;
                russianEl.onclick = () => selectRussian(russianEl);
                russianContainer.appendChild(russianEl);
            });

            // Shuffle Russian words
            const russianItems = Array.from(russianContainer.children);
            russianItems.sort(() => Math.random() - 0.5);
            russianItems.forEach(item => russianContainer.appendChild(item));
        }

        function selectEnglish(element) {
            if (element.classList.contains('matched')) return;

            document.querySelectorAll('.match-item.selected').forEach(el => {
                if (el.dataset.english) el.classList.remove('selected');
            });

            element.classList.add('selected');
            exercise4Data.selectedEnglish = element.dataset.english;

            checkMatch();
        }

        function selectRussian(element) {
            if (element.classList.contains('matched')) return;

            document.querySelectorAll('.match-item.selected').forEach(el => {
                if (el.dataset.russian) el.classList.remove('selected');
            });

            element.classList.add('selected');
            exercise4Data.selectedRussian = element.dataset.russian;

            checkMatch();
        }

        function checkMatch() {
            if (!exercise4Data.selectedEnglish || !exercise4Data.selectedRussian) return;

            exercise4Data.attempts++;
            document.getElementById('attempts4').textContent = exercise4Data.attempts;

            const currentMatches = exercise4Data.categories[exercise4Data.currentCategory].matches;
            const match = currentMatches.find(m =>
                m.english === exercise4Data.selectedEnglish && m.russian === exercise4Data.selectedRussian
            );

            if (match) {
                // Correct match
                document.querySelectorAll(`[data-english="${exercise4Data.selectedEnglish}"]`).forEach(el => {
                    el.classList.add('matched');
                    el.classList.remove('selected');
                });
                document.querySelectorAll(`[data-russian="${exercise4Data.selectedRussian}"]`).forEach(el => {
                    el.classList.add('matched');
                    el.classList.remove('selected');
                });

                exercise4Data.score++;
                exercise4Data.matched.push(match);
                document.getElementById('score4').textContent = exercise4Data.score;

                const progress = (exercise4Data.score / currentMatches.length) * 100;
                document.getElementById('progressFill4').style.width = progress + '%';
                document.getElementById('progressText4').textContent = Math.round(progress) + '% Complete';

                if (exercise4Data.score === currentMatches.length) {
                    document.getElementById('feedback4').innerHTML = `
               <div class="feedback correct">
                   🎉 Excellent! All words matched! Attempts: ${exercise4Data.attempts}
               </div>`;
                }
            } else {
                // Incorrect match
                document.querySelectorAll('.match-item.selected').forEach(el => {
                    el.classList.add('incorrect');
                    setTimeout(() => {
                        el.classList.remove('incorrect', 'selected');
                    }, 1000);
                });
            }

            exercise4Data.selectedEnglish = null;
            exercise4Data.selectedRussian = null;
        }

        function resetExercise4() {
            exercise4Data.score = 0;
            exercise4Data.attempts = 0;
            exercise4Data.selectedEnglish = null;
            exercise4Data.selectedRussian = null;
            exercise4Data.matched = [];

            const currentMatches = exercise4Data.categories[exercise4Data.currentCategory].matches;
            document.getElementById('score4').textContent = `0/${currentMatches.length}`;
            document.getElementById('attempts4').textContent = '0';
            document.getElementById('progressFill4').style.width = '0%';
            document.getElementById('progressText4').textContent = '0% Complete';
            document.getElementById('feedback4').innerHTML = '';

            createMemoryGame();
        }

        // EXERCISE 5: Story with categories
        function changeCategory5() {
            const selector = document.getElementById('categorySelector5');
            exercise5Data.currentCategory = parseInt(selector.value);
            exercise5Data.score = 0;
            exercise5Data.currentStory = 0;

            document.getElementById('score5').textContent = '0';
            document.getElementById('storyFeedback').innerHTML = '';

            createStory();
        }

        function initExercise5() {
            createCategorySelector5();
            createStory();
        }

        function createCategorySelector5() {
            const storyContainer = document.getElementById('storyText');
            if (!storyContainer) return;

            // Check if selector already exists
            if (document.getElementById('categorySelector5')) return;

            const selectorHTML = `
       <div style="text-align: center; margin-bottom: 20px;">
           <label style="font-weight: 700; margin-right: 10px;">Choose category:</label>
           <select id="categorySelector5" onchange="changeCategory5()" style="padding: 8px 12px; border-radius: 10px; border: 2px solid var(--secondary-color); font-family: var(--font-family); font-weight: 600;">
               <option value="0">🌟 The Most Important Ones</option>
               <option value="1">🏃 Movement & Actions</option>
               <option value="2">📖 Expanding Vocabulary</option>
               <option value="3">🧩 The Tricky Ones</option>
           </select>
       </div>
       `;

            storyContainer.insertAdjacentHTML('beforebegin', selectorHTML);
        }

        function createStory() {
            const storyContainer = document.getElementById('storyText');
            if (!storyContainer) return;

            const currentStory = exercise5Data.stories[exercise5Data.currentCategory][exercise5Data.currentStory];

            const storyHTML = `
       <div class="story-title">
           <h4>${currentStory.title}</h4>
           <p style="color: var(--text-muted); font-size: 0.9em;">${currentStory.titleRu}</p>
       </div>
       ${currentStory.content}
       `;

            storyContainer.innerHTML = storyHTML;

            // Update total blanks count
            const totalBlanks = currentStory.blanks.length;
            document.getElementById('storyProgress').textContent = `0/${totalBlanks}`;
        }

        function showDropdown(blank) {
            // Remove all existing dropdowns
            document.querySelectorAll('.story-dropdown').forEach(d => d.remove());

            const blankId = blank.dataset.blank;
            const currentStory = exercise5Data.stories[exercise5Data.currentCategory][exercise5Data.currentStory];
            const blankData = currentStory.blanks.find(b => b.id === blankId);

            if (!blankData) return;

            const dropdown = document.createElement('div');
            dropdown.className = 'story-dropdown show';

            // ✅ УЛУЧШЕННОЕ ПЕРЕМЕШИВАНИЕ - алгоритм Fisher-Yates
            const shuffledOptions = [...blankData.options];
            for (let i = shuffledOptions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledOptions[i], shuffledOptions[j]] = [shuffledOptions[j], shuffledOptions[i]];
            }

            shuffledOptions.forEach(option => {
                const optionEl = document.createElement('button');
                optionEl.className = 'dropdown-option';
                optionEl.textContent = option;
                optionEl.onclick = () => selectOption(blank, option, blankData.correct);
                dropdown.appendChild(optionEl);
            });

            blank.appendChild(dropdown);
        }

        // Add click handler to close dropdowns
        document.addEventListener('click', function (e) {
            if (!e.target.closest('.story-blank')) {
                document.querySelectorAll('.story-dropdown').forEach(d => d.remove());
            }
        });

        function selectOption(blank, option, correct) {
            blank.textContent = option;
            blank.classList.add('filled');

            if (option === correct) {
                blank.classList.add('correct');
                blank.classList.remove('incorrect');
            } else {
                blank.classList.add('incorrect');
                blank.classList.remove('correct');
            }

            // Remove dropdown
            const dropdown = blank.querySelector('.story-dropdown');
            if (dropdown) dropdown.remove();

            updateStoryProgress();
        }

        function updateStoryProgress() {
            const filledBlanks = document.querySelectorAll('.story-blank.filled');
            const currentStory = exercise5Data.stories[exercise5Data.currentCategory][exercise5Data.currentStory];
            const totalBlanks = currentStory.blanks.length;

            exercise5Data.score = filledBlanks.length;
            document.getElementById('score5').textContent = exercise5Data.score;
            document.getElementById('storyProgress').textContent = `${exercise5Data.score}/${totalBlanks}`;
        }

        function checkStory() {
            const blanks = document.querySelectorAll('.story-blank');
            const currentStory = exercise5Data.stories[exercise5Data.currentCategory][exercise5Data.currentStory];
            let correct = 0;

            blanks.forEach(blank => {
                const blankId = blank.dataset.blank;
                const blankData = currentStory.blanks.find(b => b.id === blankId);
                const userAnswer = blank.textContent.trim();

                if (userAnswer === blankData.correct) {
                    blank.classList.add('correct');
                    blank.classList.remove('incorrect');
                    correct++;
                } else if (blank.classList.contains('filled')) {
                    blank.classList.add('incorrect');
                    blank.classList.remove('correct');
                }
            });

            const totalBlanks = currentStory.blanks.length;
            const percentage = Math.round((correct / totalBlanks) * 100);
            const feedback = document.getElementById('storyFeedback');

            if (percentage >= 90) {
                feedback.innerHTML = `
           <div class="feedback correct">
               🏆 Excellent! ${correct}/${totalBlanks} (${percentage}%) - Perfect story!
           </div>`;
            } else if (percentage >= 70) {
                feedback.innerHTML = `
           <div class="feedback correct">
               🌟 Good job! ${correct}/${totalBlanks} (${percentage}%) - Well done!
           </div>`;
            } else {
                feedback.innerHTML = `
           <div class="feedback incorrect">
               📚 Keep practicing! ${correct}/${totalBlanks} (${percentage}%) - Try again!
           </div>`;
            }
        }

        function resetExercise5() {
            exercise5Data.score = 0;
            exercise5Data.currentStory = 0;
            exercise5Data.currentCategory = 0;

            const selector = document.getElementById('categorySelector5');
            if (selector) selector.value = '0';

            document.getElementById('score5').textContent = '0';
            document.getElementById('storyFeedback').innerHTML = '';
            createStory();
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function () {
            // Generate all exercise questions first
            generateExercise1Questions();
            generateExercise2Questions();
            generateExercise3Pairs();
            generateExercise4Matches();
            generateExercise5Stories();

            // Initialize slide navigation
            showSlide(0);

            // Populate flashcards for slides 2-5
            populateFlashcards('flashcardsGrid1', 0, 29);   // Common verbs
            populateFlashcards('flashcardsGrid2', 29, 61);  // Action verbs
            populateFlashcards('flashcardsGrid3', 61, 92);  // More verbs
            populateFlashcards('flashcardsGrid4', 92, 116); // Challenge verbs

            // Initialize exercises
            initExercise1();
            initExercise2();
            initExercise3();
            initExercise4();
            initExercise5();
        });
    </script>
</body>

</html>