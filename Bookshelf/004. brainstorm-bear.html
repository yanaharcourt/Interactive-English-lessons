<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brainstorm Bear</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../assets/book-styles.css">

</head>

<body>
    <div class="book-container">
        <div class="book-spine"></div>
        <div class="book-content">

            <!-- Cover Page 1 -->
            <div class="book-page cover-page active"
                id="page-0" style=" width: 102%;height: 107%; display: flex; justify-content: center; align-items: center;">
                
                <img src="../assets/books img/Brainstorm-Bear/cover.png"
                    alt="Cover" style="max-width: 100%; max-height: 107%; object-fit: cover;">
            </div>

            <!-- Contents Page 2 -->
            <div class="book-page" id="page-contents">
                <div class="contents-page">
                    <h2>CONTENTS</h2>
                    <ul class="contents-list">
                        <li class="contents-item" data-page="2">
                            <span class="chapter-title">Focus Question</span>
                            <span class="page-number">2</span>
                        </li>
                        <li class="contents-item" data-page="3">
                            <span class="chapter-title">A Bear in the Tree</span>
                            <span class="page-number">3</span>
                        </li>
                        <li class="contents-item" data-page="5">
                            <span class="chapter-title">Time to Brainstorm</span>
                            <span class="page-number">5</span>
                        </li>
                        <li class="contents-item" data-page="6">
                            <span class="chapter-title">Sarah's Trampoline Idea</span>
                            <span class="page-number">6</span>
                        </li>
                        <li class="contents-item" data-page="9">
                            <span class="chapter-title">Mom's Music Idea</span>
                            <span class="page-number">9</span>
                        </li>
                        <li class="contents-item" data-page="11">
                            <span class="chapter-title">Sam's Nut Trail Solution</span>
                            <span class="page-number">11</span>
                        </li>
                        <li class="contents-item" data-page="14">
                            <span class="chapter-title">The Bear Leaves</span>
                            <span class="page-number">14</span>
                        </li>
                        <li class="contents-item" data-page="15">
                            <span class="chapter-title">Bear Safety & Words to Know</span>
                            <span class="page-number">15</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Focus Question Page 3 -->
            <div class="book-page" id="page-intro" data-page="2">
                <h2>Focus Question</h2>
                <div class="page-content">
                    <p><span class="translatable-word" data-translation="Почему">Why</span> does the <span class="translatable-word" data-translation="семья">family</span> in the <span class="translatable-word" data-translation="история">story</span> <span class="translatable-word" data-translation="придумывать идеи">brainstorm</span>?</p>

                    <h3>Words to Know</h3>
                    <ul>
                        <li><span class="translatable-word" data-translation="прыгающий">bouncing</span></li>
                        <li><span class="translatable-word" data-translation="придумывать идеи">brainstorm</span></li>
                        <li><span class="translatable-word" data-translation="идея">idea</span></li>
                        <li><span class="translatable-word" data-translation="след">trail</span></li>
                        <li><span class="translatable-word" data-translation="батут">trampoline</span></li>
                        <li><span class="translatable-word" data-translation="гаражная распродажа">yard sale</span></li>
                    </ul>
                </div>
            </div>

            <!-- Page 4 -->
            <div class="book-page" data-page="3">
                <div class="page-content">
                    <p>"<span class="translatable-word" data-translation="Мама">Mom</span>, there's a <span class="translatable-word" data-translation="медведь">bear</span> in that <span class="translatable-word" data-translation="дерево">tree</span> over <span class="translatable-word" data-translation="там">there</span>!" Sam <span class="translatable-word" data-translation="позвал">called</span>.</p>

                    <img src="../assets/books img/Brainstorm-Bear/001.png" alt="Sam pointing at a bear in a tree" class="page-image">
                </div>
            </div>

            <!-- Page 5 -->
            <div class="book-page">
                <div class="page-content">
                    <img src="../assets/books img/Brainstorm-Bear/002.png" alt="Sam talking about the yard sale" class="page-image">

                    <p>"We <span class="translatable-word" data-translation="нужно">need</span> to get him <span class="translatable-word" data-translation="вниз">down</span> <span class="translatable-word" data-translation="до">before</span> our <span class="translatable-word" data-translation="гаражная распродажа">yard sale</span> <span class="translatable-word" data-translation="начнётся">starts</span>," he said.</p>
                </div>
            </div>

            <!-- Page 6 -->
            <div class="book-page" data-page="5">
                <div class="page-content">
                    <p>"We could <span class="translatable-word" data-translation="отменить">call off</span> the sale," Mrs. Miller said.</p>

                    <p>"We just need to <span class="translatable-word" data-translation="придумать идеи">brainstorm</span> a <span class="translatable-word" data-translation="способ">way</span> to get him down," said Sam.</p>

                    <img src="../assets/books img/Brainstorm-Bear/003.png" alt="Mrs. Miller and Sam talking about brainstorming" class="page-image">
                </div>
            </div>

            <!-- Page 7 -->
            <div class="book-page" data-page="6">
                <div class="page-content">
                    <img src="../assets/books img/Brainstorm-Bear/004.png" alt="Sarah suggesting the trampoline idea" class="page-image">

                    <p>"We could <span class="translatable-word" data-translation="передвинуть">move</span> our <span class="translatable-word" data-translation="батут">trampoline</span> <span class="translatable-word" data-translation="под">under</span> the tree," Sam's <span class="translatable-word" data-translation="младшая сестра">little sister</span> Sarah said.</p>
                </div>
            </div>

            <!-- Page 8 -->
            <div class="book-page">
                <div class="page-content">
                    <p>"<span class="translatable-word" data-translation="Нарисуй">Draw</span> the <span class="translatable-word" data-translation="идею">idea</span>," said Mrs. Miller to Sam.</p>

                    <p>Sam <span class="translatable-word" data-translation="нарисовал">drew</span> the idea on his <span class="translatable-word" data-translation="блокнот">pad</span> of <span class="translatable-word" data-translation="бумага">paper</span>.</p>

                    <img src="../assets/books img/Brainstorm-Bear/005.png" alt="Sam drawing the trampoline idea" class="page-image">
                </div>
            </div>

            <!-- Page 9 -->
            <div class="book-page">
                <div class="page-content">
                    <img src="../assets/books img/Brainstorm-Bear/006.png" alt="Sam's drawing of bear bouncing on trampoline" class="page-image">

                    <p>He drew the bear <span class="translatable-word" data-translation="прыгающего">bouncing</span> up into the <span class="translatable-word" data-translation="воздух">air</span>.</p>

                    <p>"I don't <span class="translatable-word" data-translation="думаю">think</span> that will <span class="translatable-word" data-translation="сработает">work</span>," he said.</p>
                </div>
            </div>

            <!-- Page 10 -->
            <div class="book-page" data-page="9">
                <div class="page-content">
                    <p>"Mom, what would you do?" Sarah <span class="translatable-word" data-translation="спросила">asked</span>.</p>

                    <p>"I'd <span class="translatable-word" data-translation="играть">play</span> some really <span class="translatable-word" data-translation="плохую">bad</span> <span class="translatable-word" data-translation="музыку">music</span>," Mrs. Miller <span class="translatable-word" data-translation="рассмеялась">laughed</span>.</p>

                    <img src="../assets/books img/Brainstorm-Bear/007.png" alt="Mrs. Miller laughing about bad music" class="page-image">
                </div>
            </div>

            <!-- Page 11 -->
            <div class="book-page">
                <div class="page-content">
                    <img src="../assets/books img/Brainstorm-Bear/008.png" alt="Sam drawing the music idea" class="page-image">

                    <p>Sam drew the idea on his pad of paper.</p>

                    <p>He drew the bear <span class="translatable-word" data-translation="взбирающегося">climbing</span> up the tree to get <span class="translatable-word" data-translation="прочь">away</span> from the <span class="translatable-word" data-translation="шум">noise</span>.</p>
                </div>
            </div>

            <!-- Page 12 -->
            <div class="book-page" data-page="11">
                <div class="page-content">
                    <p>"That might make things <span class="translatable-word" data-translation="хуже">worse</span>," Sam <span class="translatable-word" data-translation="вздохнул">sighed</span>.</p>

                    <p>"<span class="translatable-word" data-translation="Смотри">Look</span>, the bear's <span class="translatable-word" data-translation="ест">eating</span> <span class="translatable-word" data-translation="орехи">nuts</span> up there," Sarah said.</p>

                    <img src="../assets/books img/Brainstorm-Bear/009.png" alt="Sarah noticing the bear eating nuts" class="page-image">
                </div>
            </div>

            <!-- Page 13 -->
            <div class="book-page">
                <div class="page-content">
                    <img src="../assets/books img/Brainstorm-Bear/010.png" alt="Sam having an idea about the nut trail" class="page-image">

                    <p>"I've <span class="translatable-word" data-translation="понял">got</span> it!" Sam <span class="translatable-word" data-translation="крикнул">shouted</span>.</p>

                    <p>"We can make a <span class="translatable-word" data-translation="след">trail</span> of nuts <span class="translatable-word" data-translation="ведущий">leading</span> back to the <span class="translatable-word" data-translation="лес">forest</span>," he said.</p>
                </div>
            </div>

            <!-- Page 14 -->
            <div class="book-page">
                <div class="page-content">
                    <p>"Let's <span class="translatable-word" data-translation="попробуем">try</span> it," Mrs. Miller said.</p>

                    <p><span class="translatable-word" data-translation="Все">Everyone</span> <span class="translatable-word" data-translation="пошли">went</span> to get nuts from under a tree in the <span class="translatable-word" data-translation="задний двор">back yard</span>.</p>

                    <img src="../assets/books img/Brainstorm-Bear/011.png" alt="Family collecting nuts from backyard" class="page-image">
                </div>
            </div>

            <!-- Page 15 -->
            <div class="book-page" data-page="14">
                <div class="page-content">
                    <img src="../assets/books img/Brainstorm-Bear/012.png" alt="Bear climbing down and leaving on its own" class="page-image">

                    <p><span class="translatable-word" data-translation="Пока">While</span> they were <span class="translatable-word" data-translation="ушли">gone</span>, the bear <span class="translatable-word" data-translation="спустился">climbed down</span> and <span class="translatable-word" data-translation="ушёл">left</span> on its <span class="translatable-word" data-translation="собственной воле">own</span>.</p>

                    <p>"Aw, the bear is <span class="translatable-word" data-translation="ушёл">gone</span>!" Sam said.</p>
                </div>
            </div>

            <!-- Page 16 -->
            <div class="book-page">
                <div class="page-content">
                    <img src="../assets/books img/Brainstorm-Bear/013.png" alt="Mrs. Miller smiling about the yard sale" class="page-image">

                    <p>"<span class="translatable-word" data-translation="Посмотри на светлую сторону">Look on the bright side</span>," Mrs. Miller said.</p>

                    <p>"At <span class="translatable-word" data-translation="по крайней мере">least</span> you can have the yard sale now," she <span class="translatable-word" data-translation="улыбнулась">smiled</span>.</p>
                </div>
            </div>

            <!-- Bear Safety Page 17 -->
            <div class="book-page" data-page="15">
                <h2>Bear Safety</h2>
                <div class="page-content">
                    <p>In many <span class="translatable-word" data-translation="местах">places</span>, bears <span class="translatable-word" data-translation="иногда">sometimes</span> come <span class="translatable-word" data-translation="близко">close</span> to people's <span class="translatable-word" data-translation="домам">homes</span>.</p>

                    <p>If you <span class="translatable-word" data-translation="видишь">see</span> a bear near your house, do not go <span class="translatable-word" data-translation="рядом">near</span> it. <span class="translatable-word" data-translation="Отступай">Back away</span> <span class="translatable-word" data-translation="медленно">slowly</span> and <span class="translatable-word" data-translation="спокойно">calmly</span> and go <span class="translatable-word" data-translation="внутрь">inside</span> your house.</p>

                    <p>Stay inside and <span class="translatable-word" data-translation="позвони">call</span> your local Department of Wildlife if you need <span class="translatable-word" data-translation="помощь">help</span>.</p>
                </div>
            </div>

            <!-- Glossary Page 18 -->
            <div class="book-page">
                <h2>Words to Know</h2>
                <div class="page-content">
                    <p><strong><span class="translatable-word" data-translation="прыгающий">bouncing</span></strong> (v.)<br>
                    <span class="translatable-word" data-translation="двигающийся">moving</span> <span class="translatable-word" data-translation="быстро">quickly</span> back from or <span class="translatable-word" data-translation="отпрыгивающий">springing</span> off a <span class="translatable-word" data-translation="поверхность">surface</span> after <span class="translatable-word" data-translation="ударяясь">hitting</span> against it</p>

                    <p><strong><span class="translatable-word" data-translation="придумывать идеи">brainstorm</span></strong> (v.)<br>
                    to <span class="translatable-word" data-translation="делиться">share</span> and <span class="translatable-word" data-translation="развивать">develop</span> ideas, often related to <span class="translatable-word" data-translation="решению">solving</span> a <span class="translatable-word" data-translation="проблемы">problem</span></p>

                    <p><strong><span class="translatable-word" data-translation="идея">idea</span></strong> (n.)<br>
                    a <span class="translatable-word" data-translation="мысль">thought</span>, <span class="translatable-word" data-translation="убеждение">belief</span>, or <span class="translatable-word" data-translation="мнение">opinion</span></p>

                    <p><strong><span class="translatable-word" data-translation="след">trail</span></strong> (n.)<br>
                    a <span class="translatable-word" data-translation="серия">series</span> of <span class="translatable-word" data-translation="следов">tracks</span>, <span class="translatable-word" data-translation="знаков">signs</span>, or <span class="translatable-word" data-translation="запахов">smells</span> left behind when something moves from one place to another</p>

                    <p><strong><span class="translatable-word" data-translation="батут">trampoline</span></strong> (n.)<br>
                    a <span class="translatable-word" data-translation="устройство">device</span> for bouncing that has a strong, tightly <span class="translatable-word" data-translation="натянутый">stretched</span> piece of <span class="translatable-word" data-translation="ткань">fabric</span> attached with <span class="translatable-word" data-translation="пружинами">springs</span> to a <span class="translatable-word" data-translation="раме">frame</span></p>

                    <p><strong><span class="translatable-word" data-translation="гаражная распродажа">yard sale</span></strong> (n.)<br>
                    an <span class="translatable-word" data-translation="событие">event</span> where <span class="translatable-word" data-translation="использованные">used</span> items are <span class="translatable-word" data-translation="продаются">sold</span> outside the seller's home</p>
                </div>
            </div>

        </div>
    </div>

    <!-- Navigation -->
    <div class="book-navigation">
        <button class="nav-button" id="prevBtn" onclick="previousPage()">← Prev</button>
        <span class="page-indicator" id="pageIndicator">Page 1 of 18</span>
        <button class="nav-button" id="nextBtn" onclick="nextPage()">Next →</button>
    </div>

    
    <script>
        let currentPage = 0;
        const pages = document.querySelectorAll('.book-page');
        const totalPages = pages.length;

        function showPage(pageIndex) {
            pages.forEach(page => page.classList.remove('active')); 
            pages[pageIndex].classList.add('active'); 
            document.getElementById('pageIndicator').textContent = 
            `Page ${pageIndex + 1} of ${totalPages}`;
            document.getElementById('prevBtn').disabled = pageIndex === 0;
            document.getElementById('nextBtn').disabled = pageIndex === totalPages - 1;

            window.scrollTo(0, 0);
        }

        showPage(0);

        function nextPage() {
            if (currentPage < totalPages - 1) {
                currentPage++;
                showPage(currentPage);
            }
        }

        function previousPage() {
            if (currentPage > 0) {
                currentPage--;
                showPage(currentPage);
            }
        }

        function goToPage(pageIndex) {
            if (pageIndex >= 0 && pageIndex < totalPages) {
                currentPage = pageIndex;
                showPage(currentPage);
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', function (e) {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextPage();
            } else if (e.key === 'ArrowLeft') {
                e.preventDefault();
                previousPage();
            }
        });
        
        // Contents clicks
        document.querySelectorAll('.contents-item').forEach(item => {
            item.addEventListener('click', () => {
                const pageIndex = parseInt(item.getAttribute('data-page'));
                goToPage(pageIndex);
            });
        });

        // Initialize
        showPage(0);
    </script>

    <script>
        /** Script for showing word translations on hover */
        class TranslationSystem {
            constructor(options = {}) {
                this.options = {
                    tooltipClass: 'translation-tooltip',
                    wordClass: 'translatable-word',
                    hoverClass: 'word-hover',
                    dataAttribute: 'data-translation',
                    animationDuration: 300,
                    ...options
                };

                this.init();
            }

            init() {
                this.createStyles();
                this.initTranslatableWords();
                this.addEventListeners();
            }

            createStyles() {
                if (document.getElementById('translation-system-styles')) {
                    return;
                }

                const style = document.createElement('style');
                style.id = 'translation-system-styles';
                style.textContent = ``;

                document.head.appendChild(style);
            }

            initTranslatableWords() {
                const words = document.querySelectorAll(`[${this.options.dataAttribute}]`);

                words.forEach(word => {
                    if (!word.classList.contains(this.options.wordClass)) {
                        word.classList.add(this.options.wordClass);
                    }

                    this.createTooltip(word);
                });
            }

            createTooltip(wordElement) {
                if (wordElement.querySelector(`.${this.options.tooltipClass}`)) {
                    return;
                }

                const translation = wordElement.getAttribute(this.options.dataAttribute);
                if (!translation) {
                    return;
                }

                const tooltip = document.createElement('div');
                tooltip.className = this.options.tooltipClass;
                tooltip.textContent = translation;

                wordElement.appendChild(tooltip);
            }

            addEventListeners() {
                if (this.isMobile()) {
                    document.addEventListener('click', (e) => {
                        const clickedWord = e.target.closest(`.${this.options.wordClass}`);

                        if (clickedWord) {
                            e.preventDefault();
                            this.toggleMobileTooltip(clickedWord);
                        } else {
                            this.hideAllMobileTooltips();
                        }
                    });
                }

                this.observeChanges();
            }

            toggleMobileTooltip(wordElement) {
                const tooltip = wordElement.querySelector(`.${this.options.tooltipClass}`);
                if (!tooltip) return;

                this.hideAllMobileTooltips();

                tooltip.style.opacity = '1';
                tooltip.style.visibility = 'visible';
                tooltip.classList.add('mobile-active');

                setTimeout(() => {
                    if (tooltip.classList.contains('mobile-active')) {
                        tooltip.style.opacity = '0';
                        tooltip.style.visibility = 'hidden';
                        tooltip.classList.remove('mobile-active');
                    }
                }, 3000);
            }

            hideAllMobileTooltips() {
                const activeTooltips = document.querySelectorAll(`.${this.options.tooltipClass}.mobile-active`);
                activeTooltips.forEach(tooltip => {
                    tooltip.style.opacity = '0';
                    tooltip.style.visibility = 'hidden';
                    tooltip.classList.remove('mobile-active');
                });
            }

            isMobile() {
                return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
                    window.innerWidth <= 768;
            }

            observeChanges() {
                const observer = new MutationObserver((mutations) => {
                    mutations.forEach((mutation) => {
                        mutation.addedNodes.forEach((node) => {
                            if (node.nodeType === Node.ELEMENT_NODE) {
                                const newWords = node.querySelectorAll(`[${this.options.dataAttribute}]`);
                                newWords.forEach(word => {
                                    if (!word.classList.contains(this.options.wordClass)) {
                                        word.classList.add(this.options.wordClass);
                                        this.createTooltip(word);
                                    }
                                });
                            }
                        });
                    });
                });

                observer.observe(document.body, {
                    childList: true,
                    subtree: true
                });
            }
        }

        // Auto-initialize on page load
        document.addEventListener('DOMContentLoaded', function () {
            if (document.querySelector('[data-translation]')) {
                window.translationSystem = new TranslationSystem();
                console.log('Translation system initialized automatically');
            }
        });
    </script>

</body>

</html>